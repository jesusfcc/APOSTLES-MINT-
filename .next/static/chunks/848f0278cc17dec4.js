(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,145988,e=>{"use strict";var a=e.i(612838),t=e.i(342733),r=e.i(772935),n=e.i(687322);async function s({account:e,serializableTransaction:t,transaction:r,gasless:s}){let d=(0,a.getContract)({address:s.relayerForwarderAddress,chain:r.chain,client:r.client}),p=await (0,n.readContract)({contract:d,method:"function getNonce(address) view returns (uint256)",params:[e.address]}),[c,l]=await (async()=>{if(!t.to)throw Error("OpenZeppelin transactions must have a 'to' address");if(!t.gas)throw Error("OpenZeppelin transactions must have a 'gas' value");if(!t.data)throw Error("OpenZeppelin transactions must have a 'data' value");if(s.experimentalChainlessSupport){let a={chainid:BigInt(r.chain.id),data:t.data,from:e.address,gas:t.gas,nonce:p,to:t.to,value:0n};return[await e.signTypedData({domain:{name:"GSNv2 Forwarder",verifyingContract:d.address,version:"0.0.1"},message:a,primaryType:"ForwardRequest",types:{ForwardRequest:o}}),a]}let a={data:t.data,from:e.address,gas:t.gas,nonce:p,to:t.to,value:0n};return[await e.signTypedData({domain:{chainId:r.chain.id,name:s.domainName??"GSNv2 Forwarder",verifyingContract:d.address,version:s.domainVersion??"0.0.1"},message:a,primaryType:"ForwardRequest",types:{ForwardRequest:i}}),a]})();return{message:l,messageType:"forward",signature:c}}let i=[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"},{name:"gas",type:"uint256"},{name:"nonce",type:"uint256"},{name:"data",type:"bytes"}],o=[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"},{name:"gas",type:"uint256"},{name:"nonce",type:"uint256"},{name:"data",type:"bytes"},{name:"chainid",type:"uint256"}];async function d(e){let{message:a,messageType:n,signature:i}=await s(e),o=await fetch(e.gasless.relayerUrl,{body:(0,r.stringify)({forwarderAddress:e.gasless.relayerForwarderAddress,request:a,signature:i,type:n}),method:"POST"});if(!o.ok)throw Error(`Failed to send transaction: ${await o.text()}`);let d=await o.json();if(!d.result)throw Error(`Relay transaction failed: ${d.message}`);let p=JSON.parse(d.result).txHash;if((0,t.isHex)(p))return{chain:e.transaction.chain,client:e.transaction.client,transactionHash:p};throw Error(`Failed to send transaction: ${(0,r.stringify)(d)}`)}e.s(["prepareOpenZeppelinTransaction",()=>s,"relayOpenZeppelinTransaction",()=>d])}]);