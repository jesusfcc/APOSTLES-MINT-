(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,387572,t=>{"use strict";var a=t.i(704434),e=t.i(253671),n=t.i(612838),i=t.i(406356),s=t.i(342733),o=t.i(629821),r=t.i(772935),d=t.i(687322);async function c({account:t,serializableTransaction:s,transaction:r,gasless:c}){let h=(0,n.getContract)({address:c.relayerForwarderAddress,chain:r.chain,client:r.client}),p=await (0,d.readContract)({contract:h,method:"function getNonce(address,uint256) view returns (uint256)",params:[t.address,0n]}),l=Math.floor(Date.now()/1e3)+(c.deadlineSeconds??3600),u={batchId:0n,batchNonce:p,data:s.data,deadline:l,from:t.address,to:s.to,token:e.ZERO_ADDRESS,tokenGasPrice:0n,txGas:s.gas};if(!u.to)throw Error("Cannot send a transaction without a `to` address");if(!u.txGas)throw Error("Cannot send a transaction without a `gas` value");if(!u.data)throw Error("Cannot send a transaction without a `data` value");let y=(0,a.encodeAbiParameters)([{type:"address"},{type:"address"},{type:"address"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[(0,i.getAddress)(u.from),(0,i.getAddress)(u.to),(0,i.getAddress)(u.token),u.txGas,u.tokenGasPrice,u.batchId,u.batchNonce,(0,o.keccak256)(u.data)]);return[u,await t.signMessage({message:y})]}async function h(t){let[a,e]=await c(t),n=await fetch("https://api.biconomy.io/api/v2/meta-tx/native",{body:(0,r.stringify)({apiId:t.gasless.apiId,from:a.from,gasLimit:a.txGas,params:[a,e],to:a.to}),headers:{"Content-Type":"application/json;charset=utf-8","x-api-key":t.gasless.apiKey},method:"POST"});if(!n.ok)throw Error(`Failed to send transaction: ${await n.text()}`);let i=await n.json(),o=i.txHash;if((0,s.isHex)(o))return{chain:t.transaction.chain,client:t.transaction.client,transactionHash:o};throw Error(`Failed to send transaction: ${(0,r.stringify)(i)}`)}t.s(["prepareBiconomyTransaction",()=>c,"relayBiconomyTransaction",()=>h])}]);