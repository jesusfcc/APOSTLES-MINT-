(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,458549,e=>{"use strict";var s=e.i(959596),a=e.i(372262);async function i(e){let{wallet:i,walletConnectClient:t,event:r,chains:c,onConnect:p}=e,d=i.getAccount();if(!d)throw Error("No account connected to provided wallet");let m=r.verifyContext?.verified?.origin;m&&await o({origin:m,walletConnectClient:t});let l=await n({account:d,chains:c,sessionProposal:r,walletConnectClient:t});await (0,a.saveSession)(l),i.subscribe("disconnect",()=>{(0,s.disconnectWalletConnectSession)({session:l,walletConnectClient:t})}),p?.(l)}async function o({walletConnectClient:e,origin:i}){for(let o of(await (0,a.getSessions)()))o.origin===i&&await (0,s.disconnectWalletConnectSession)({session:o,walletConnectClient:e})}async function n({account:e,walletConnectClient:s,sessionProposal:a,chains:i}){if(!a.params.requiredNamespaces?.eip155&&!a.params.optionalNamespaces?.eip155)throw Error("No EIP155 namespace found in Wallet Connect session proposal");let o={chains:[...Array.from(new Set([...a.params.requiredNamespaces?.eip155?.chains?.map(s=>`${s}:${e.address}`)??[],...a.params.optionalNamespaces?.eip155?.chains?.map(s=>`${s}:${e.address}`)??[],...i?.map(s=>`eip155:${s.id}:${e.address}`)??[]]))],events:[...a.params.requiredNamespaces?.eip155?.events??[],...a.params.optionalNamespaces?.eip155?.events??[]],methods:[...a.params.requiredNamespaces?.eip155?.methods??[],...a.params.optionalNamespaces?.eip155?.methods??[]]},n=await s.approve({id:a.id,namespaces:{eip155:{accounts:o.chains,events:o.events,methods:o.methods}}}),t=await n.acknowledged();return{origin:a.verifyContext?.verified?.origin||"Unknown origin",topic:t.topic}}e.s(["acceptSessionProposal",()=>n,"disconnectExistingSessions",()=>o,"onSessionProposal",()=>i])}]);