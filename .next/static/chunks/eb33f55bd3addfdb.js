(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,320502,(e,t,s)=>{var i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||e.g,r=function(){function e(){this.fetch=!1,this.DOMException=i.DOMException}return e.prototype=i,new e}();(function(t){var s=void 0!==r&&r||"undefined"!=typeof self&&self||e.g||{},i={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};if(i.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};function o(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i.iterable&&(t[Symbol.iterator]=function(){return t}),t}function l(e){this.map={},e instanceof l?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function p(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}}function u(e){return new Promise(function(t,s){e.onload=function(){t(e.result)},e.onerror=function(){s(e.error)}})}function d(e){var t=new FileReader,s=u(t);return t.readAsArrayBuffer(e),s}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(i.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(i.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;i.arrayBuffer&&i.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||a(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e)}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=p(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(i.blob)return this.blob().then(d);throw Error("could not read as ArrayBuffer")},this.text=function(){var e,t,s,i,r,n=p(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,s=u(t=new FileReader),r=(i=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?i[1]:"utf-8",t.readAsText(e,r),s;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),s=Array(t.length),i=0;i<t.length;i++)s[i]=String.fromCharCode(t[i]);return s.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},i.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(e,t){e=o(e),t=c(t);var s=this.map[e];this.map[e]=s?s+", "+t:t},l.prototype.delete=function(e){delete this.map[o(e)]},l.prototype.get=function(e){return e=o(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(o(e))},l.prototype.set=function(e,t){this.map[o(e)]=c(t)},l.prototype.forEach=function(e,t){for(var s in this.map)this.map.hasOwnProperty(s)&&e.call(t,this.map[s],s,this)},l.prototype.keys=function(){var e=[];return this.forEach(function(t,s){e.push(s)}),h(e)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),h(e)},l.prototype.entries=function(){var e=[];return this.forEach(function(t,s){e.push([s,t])}),h(e)},i.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var v=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function y(e,t){if(!(this instanceof y))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,r,n=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new l(t.headers)),this.method=(r=(i=t.method||this.method||"GET").toUpperCase(),v.indexOf(r)>-1?r:i),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in s)return new AbortController().signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var a=/([?&])_=[^&]*/;a.test(this.url)?this.url=this.url.replace(a,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function g(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var s=e.split("="),i=s.shift().replace(/\+/g," "),r=s.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function b(e,t){if(!(this instanceof b))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},m.call(y.prototype),m.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var P=[301,302,303,307,308];b.redirect=function(e,t){if(-1===P.indexOf(t))throw RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},t.DOMException=s.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var s=Error(e);this.stack=s.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function w(e,r){return new Promise(function(n,a){var h=new y(e,r);if(h.signal&&h.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var p=new XMLHttpRequest;function u(){p.abort()}if(p.onload=function(){var e,t,s={statusText:p.statusText,headers:(e=p.getAllResponseHeaders()||"",t=new l,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var s=e.split(":"),i=s.shift().trim();if(i){var r=s.join(":").trim();try{t.append(i,r)}catch(e){console.warn("Response "+e.message)}}}),t)};0===h.url.indexOf("file://")&&(p.status<200||p.status>599)?s.status=200:s.status=p.status,s.url="responseURL"in p?p.responseURL:s.headers.get("X-Request-URL");var i="response"in p?p.response:p.responseText;setTimeout(function(){n(new b(i,s))},0)},p.onerror=function(){setTimeout(function(){a(TypeError("Network request failed"))},0)},p.ontimeout=function(){setTimeout(function(){a(TypeError("Network request timed out"))},0)},p.onabort=function(){setTimeout(function(){a(new t.DOMException("Aborted","AbortError"))},0)},p.open(h.method,function(e){try{return""===e&&s.location.href?s.location.href:e}catch(t){return e}}(h.url),!0),"include"===h.credentials?p.withCredentials=!0:"omit"===h.credentials&&(p.withCredentials=!1),"responseType"in p&&(i.blob?p.responseType="blob":i.arrayBuffer&&(p.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof l||s.Headers&&r.headers instanceof s.Headers)){var d=[];Object.getOwnPropertyNames(r.headers).forEach(function(e){d.push(o(e)),p.setRequestHeader(e,c(r.headers[e]))}),h.headers.forEach(function(e,t){-1===d.indexOf(t)&&p.setRequestHeader(t,e)})}else h.headers.forEach(function(e,t){p.setRequestHeader(t,e)});h.signal&&(h.signal.addEventListener("abort",u),p.onreadystatechange=function(){4===p.readyState&&h.signal.removeEventListener("abort",u)}),p.send(void 0===h._bodyInit?null:h._bodyInit)})}w.polyfill=!0,s.fetch||(s.fetch=w,s.Headers=l,s.Request=y,s.Response=b),t.Headers=l,t.Request=y,t.Response=b,t.fetch=w,Object.defineProperty(t,"__esModule",{value:!0})})({}),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var n=i.fetch?i:r;(s=n.fetch).default=n.fetch,s.fetch=n.fetch,s.Headers=n.Headers,s.Request=n.Request,s.Response=n.Response,t.exports=s},626321,e=>{"use strict";let t;var s=e.i(467034),i=e.i(508652),r=e.i(741483),n=e.i(278662),a=e.i(241370);e.i(424047);var o=e.i(329193),c=e.i(219298),h=e.i(320502),l=e.i(31794),p=e.i(102526),u=e.i(889113),d=Object.defineProperty,f=Object.defineProperties,m=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,b=(e,t,s)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,P=(e,t)=>{for(var s in t||(t={}))y.call(t,s)&&b(e,s,t[s]);if(v)for(var s of v(t))g.call(t,s)&&b(e,s,t[s]);return e};let w={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class O{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new c.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,p.isHttpUrl)(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{let t,s,i=(0,l.safeJsonStringify)(e),r=await (await (0,h.default)(this.url,(t=P({},w),s={body:i},f(t,m(s))))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!(0,p.isHttpUrl)(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return t(Error("HTTP connection is missing or invalid"));e()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){let t,s,i=(0,l.safeJsonStringify)({id:1,jsonrpc:"2.0",method:"test",params:[]});await (0,h.default)(e,(t=P({},w),s={body:i},f(t,m(s))))}this.onOpen()}catch(t){let e=this.parseError(t);throw this.events.emit("register_error",e),this.onClose(),e}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?(0,l.safeJsonParse)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let s=this.parseError(t),i=s.message||s.toString(),r=(0,o.formatJsonRpcError)(e,i);this.events.emit("payload",r)}parseError(e,t=this.url){return(0,u.parseConnectionError)(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}var I=e.i(501365);let C="error",j="wc@2:universal_provider:",E="https://rpc.walletconnect.org/v1/",A="generic",S=`${E}bundler`,H="call_status",q="default_chain_changed";function $(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function D(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function x(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let _="[object String]",R="[object Number]",T="[object Boolean]",N="[object Arguments]";function B(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function U(e,t,i,r=new Map,n){let a=n?.(e,t,i,r);if(null!=a)return a;if($(e))return e;if(r.has(e))return r.get(e);if(Array.isArray(e)){let t=Array(e.length);r.set(e,t);for(let s=0;s<e.length;s++)t[s]=U(e[s],s,i,r,n);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){let t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){let t=new Map;for(let[s,a]of(r.set(e,t),e))t.set(s,U(a,s,i,r,n));return t}if(e instanceof Set){let t=new Set;for(let s of(r.set(e,t),e))t.add(U(s,void 0,i,r,n));return t}if("u">typeof s.Buffer&&s.Buffer.isBuffer(e))return e.subarray();if(B(e)){let t=new(Object.getPrototypeOf(e)).constructor(e.length);r.set(e,t);for(let s=0;s<e.length;s++)t[s]=U(e[s],s,i,r,n);return t}if(e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){let t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return r.set(e,t),M(t,e,i,r,n),t}if("u">typeof File&&e instanceof File){let t=new File([e],e.name,{type:e.type});return r.set(e,t),M(t,e,i,r,n),t}if(e instanceof Blob){let t=new Blob([e],{type:e.type});return r.set(e,t),M(t,e,i,r,n),t}if(e instanceof Error){let t=new e.constructor;return r.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,M(t,e,i,r,n),t}if("object"==typeof e&&function(e){switch(x(e)){case N:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case T:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case R:case"[object Object]":case"[object RegExp]":case"[object Set]":case _:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(e)){let t=Object.create(Object.getPrototypeOf(e));return r.set(e,t),M(t,e,i,r,n),t}return e}function M(e,t,s=e,i,r){let n=[...Object.keys(t),...D(t)];for(let a=0;a<n.length;a++){let o=n[a],c=Object.getOwnPropertyDescriptor(e,o);(null==c||c.writable)&&(e[o]=U(t[o],o,s,i,r))}}function F(e){var t;return t=(t,s,i,r)=>{let n;if(null!=n)return n;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case R:case _:case T:{let t=new e.constructor(e?.valueOf());return M(t,e),t}case N:{let t={};return M(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}},U(e,void 0,e,new Map,t)}function k(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===x(e)}function J(e){return"object"==typeof e&&null!==e}function L(){}var V=Object.defineProperty,z=Object.defineProperties,K=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,Z=(e,t,s)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Q=(e,t)=>{for(var s in t||(t={}))W.call(t,s)&&Z(e,s,t[s]);if(G)for(var s of G(t))X.call(t,s)&&Z(e,s,t[s]);return e},Y=(e,t)=>z(e,K(t));function ee(e,t,s){var i;let n=(0,r.parseChainId)(e);return(null==(i=t.rpcMap)?void 0:i[n.reference])||`${E}?chainId=${n.namespace}:${n.reference}&projectId=${s}`}function et(e){return e.includes(":")?e.split(":")[1]:e}function es(e){return e.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function ei(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>{var s,i;return(null==(s=t?.chains)?void 0:s.length)&&(null==(i=t?.chains)?void 0:i.length)>0}))}function er(e={},t={}){return function(e,...t){return function(e,...t){let i=t.slice(0,-1),r=t[t.length-1],n=e;for(let e=0;e<i.length;e++)n=function e(t,i,r,n){if($(t)&&(t=Object(t)),null==i||"object"!=typeof i)return t;if(n.has(i))return function(e){if($(e))return e;if(Array.isArray(e)||B(e)||e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);let t=Object.getPrototypeOf(e),s=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new s(e);if(e instanceof RegExp){let t=new s(e);return t.lastIndex=e.lastIndex,t}if(e instanceof DataView)return new s(e.buffer.slice(0));if(e instanceof Error){let t=new s(e.message);return t.stack=e.stack,t.name=e.name,t.cause=e.cause,t}return"u">typeof File&&e instanceof File?new s([e],e.name,{type:e.type,lastModified:e.lastModified}):"object"==typeof e?Object.assign(Object.create(t),e):e}(n.get(i));if(n.set(i,t),Array.isArray(i)){i=i.slice();for(let e=0;e<i.length;e++)i[e]=i[e]??void 0}let a=[...Object.keys(i),...D(i)];for(let o=0;o<a.length;o++){let c=a[o],h=i[c],l=t[c];if(k(h)&&(h={...h}),k(l)&&(l={...l}),"u">typeof s.Buffer&&s.Buffer.isBuffer(h)&&(h=F(h)),Array.isArray(h))if("object"==typeof l&&null!=l){let e=[],t=Reflect.ownKeys(l);for(let s=0;s<t.length;s++){let i=t[s];e[i]=l[i]}l=e}else l=[];let p=r(l,h,c,t,i,n);null!=p?t[c]=p:Array.isArray(h)||J(l)&&J(h)?t[c]=e(l,h,r,n):null==l&&function(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){let t=e[Symbol.toStringTag];return null!=t&&!!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(h)?t[c]=e({},h,r,n):null==l&&B(h)?t[c]=F(h):(void 0===l||void 0!==h)&&(t[c]=h)}return t}(n,i[e],r,new Map);return n}(e,...t,L)}(ei(en(e)),ei(en(t)))}function en(e){var t,s,i,n,a;let o={};if(!(0,r.isValidObject)(e))return o;for(let[c,h]of Object.entries(e)){let e=(0,r.isCaipNamespace)(c)?[c]:h.chains,l=h.methods||[],p=h.events||[],u=h.rpcMap||{},d=(0,r.parseNamespaceKey)(c);o[d]=Y(Q(Q({},o[d]),h),{chains:(0,r.mergeArrays)(e,null==(t=o[d])?void 0:t.chains),methods:(0,r.mergeArrays)(l,null==(s=o[d])?void 0:s.methods),events:(0,r.mergeArrays)(p,null==(i=o[d])?void 0:i.events)}),((0,r.isValidObject)(u)||(0,r.isValidObject)((null==(n=o[d])?void 0:n.rpcMap)||{}))&&(o[d].rpcMap=Q(Q({},u),null==(a=o[d])?void 0:a.rpcMap))}return o}function ea(e){return e.includes(":")?e.split(":")[2]:e}function eo(e){let t={};for(let[s,i]of Object.entries(e)){let e=i.methods||[],n=i.events||[],a=i.accounts||[],o=(0,r.isCaipNamespace)(s)?[s]:i.chains?i.chains:es(i.accounts);t[s]={chains:o,methods:e,events:n,accounts:a}}return t}function ec(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):isNaN(Number(e=e.includes(":")?e.split(":")[1]:e))?e:Number(e)}let eh={},el=e=>eh[e],ep=(e,t)=>{eh[e]=t};var eu=Object.defineProperty,ed=Object.getOwnPropertySymbols,ef=Object.prototype.hasOwnProperty,em=Object.prototype.propertyIsEnumerable,ev=(e,t,s)=>t in e?eu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ey=(e,t)=>{for(var s in t||(t={}))ef.call(t,s)&&ev(e,s,t[s]);if(ed)for(var s of ed(t))em.call(t,s)&&ev(e,s,t[s]);return e};let eg="eip155",eb=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],eP=e=>e&&e.startsWith("0x")?BigInt(e).toString(10):e,ew=e=>e&&e.startsWith("0x")?e:`0x${BigInt(e).toString(16)}`,eO=e=>Object.keys(e).filter(e=>eb.includes(e)).reduce((t,s)=>(t[s]=eI(e[s]),t),{}),eI=e=>"string"==typeof e&&function(e){try{let t=JSON.parse(e);return"object"==typeof t&&null!==t&&!Array.isArray(t)}catch{return!1}}(e)?JSON.parse(e):e;var eC=Object.defineProperty;class ej{constructor(e){((e,t,s)=>{let i,r;return r=void 0,(i="symbol"!=typeof t?t+"":t)in e?eC(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r})(this,"storage"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,t){return await this.storage.setItem(e,t)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return t||(t=new ej(e)),t}}var eE=Object.defineProperty,eA=Object.defineProperties,eS=Object.getOwnPropertyDescriptors,eH=Object.getOwnPropertySymbols,eq=Object.prototype.hasOwnProperty,e$=Object.prototype.propertyIsEnumerable,eD=(e,t,s)=>t in e?eE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;async function ex(e,t){let s,i=(0,r.parseChainId)(e.result.capabilities.caip345.caip2),n=e.result.capabilities.caip345.transactionHashes,a=await Promise.allSettled(n.map(e=>e_(i.reference,e,t))),o=a.filter(e=>"fulfilled"===e.status).map(e=>e.value).filter(e=>e);a.filter(e=>"rejected"===e.status).forEach(e=>console.warn("Failed to fetch transaction receipt:",e.reason));let c=!o.length||o.some(e=>!e),h=o.every(e=>e?.status==="0x1"),l=o.every(e=>e?.status==="0x0"),p=o.some(e=>e?.status==="0x0");return c?s=100:h?s=200:l?s=500:p&&(s=600),{id:e.result.id,version:e.request.version,atomic:e.request.atomicRequired,chainId:e.request.chainId,capabilities:e.result.capabilities,receipts:o,status:s}}async function e_(e,t,s){return await s(parseInt(e)).request((0,o.formatJsonRpcRequest)("eth_getTransactionReceipt",[t]))}async function eR({sendCalls:e,storage:t}){let s=await t.getItem(H);await t.setItem(H,eA(((e,t)=>{for(var s in t||(t={}))eq.call(t,s)&&eD(e,s,t[s]);if(eH)for(var s of eH(t))e$.call(t,s)&&eD(e,s,t[s]);return e})({},s),eS({[e.result.id]:{request:e.request,result:e.result,expiry:(0,r.calcExpiry)(86400)}})))}async function eT({resultId:e,storage:t}){let s=await t.getItem(H);if(s){for(let i in delete s[e],await t.setItem(H,s),s)(0,r.isExpired)(s[i].expiry)&&delete s[i];await t.setItem(H,s)}}async function eN({resultId:e,storage:t}){let s=await t.getItem(H),i=s?.[e];if(i&&!(0,r.isExpired)(i.expiry))return i;await eT({resultId:e,storage:t})}var eB=Object.defineProperty,eU=(e,t,s)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?eB(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s};class eM{constructor(e){eU(this,"name","polkadot"),eU(this,"client"),eU(this,"httpProviders"),eU(this,"events"),eU(this,"namespace"),eU(this,"chainId"),this.namespace=e.namespace,this.events=el("events"),this.client=el("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(q,`${this.name}:${e}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var s;let i=et(t);e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace,this.client.core.projectId);return new I.JsonRpcProvider(new O(s,el("disableProviderPing")))}}var eF=Object.defineProperty,ek=Object.defineProperties,eJ=Object.getOwnPropertyDescriptors,eL=Object.getOwnPropertySymbols,eV=Object.prototype.hasOwnProperty,ez=Object.prototype.propertyIsEnumerable,eK=(e,t,s)=>t in e?eF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,eG=(e,t)=>{for(var s in t||(t={}))eV.call(t,s)&&eK(e,s,t[s]);if(eL)for(var s of eL(t))ez.call(t,s)&&eK(e,s,t[s]);return e},eW=(e,t,s)=>eK(e,"symbol"!=typeof t?t+"":t,s);class eX{constructor(e){eW(this,"name","eip155"),eW(this,"client"),eW(this,"chainId"),eW(this,"namespace"),eW(this,"httpProviders"),eW(this,"events"),eW(this,"storage"),this.namespace=e.namespace,this.events=el("events"),this.client=el("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=ej.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e);case"wallet_sendCalls":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(q,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){let s=t||ee(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return new I.JsonRpcProvider(new O(s,el("disableProviderPing")))}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var s;let i=parseInt(et(t));e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])}),e}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}getHttpProvider(e){let t=e||this.chainId;return this.httpProviders[t]||(this.httpProviders=ek(eG({},this.httpProviders),eJ({[t]:this.createHttpProvider(t)})),this.httpProviders[t])}async handleSwitchChain(e){var t,s;let i=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0",r=parseInt(i=i.startsWith("0x")?i:`0x${i}`,16);if(this.isChainApproved(r))this.setDefaultChain(`${r}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:null==(s=this.namespace.chains)?void 0:s[0]}),this.setDefaultChain(`${r}`);else throw Error(`Failed to switch to chain 'eip155:${r}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,s,i,n,a;let o,c=null==(s=null==(t=e.request)?void 0:t.params)?void 0:s[0],h=(null==(n=null==(i=e.request)?void 0:i.params)?void 0:n[1])||[];if(!c)throw Error("Missing address parameter in `wallet_getCapabilities` request");let l=this.client.session.get(e.topic),p=(null==(a=l?.sessionProperties)?void 0:a.capabilities)||{},u=`${c}${h.join(",")}`,d=p?.[u];if(d)return d;try{o=((e,t,s)=>{let{sessionProperties:i={},scopedProperties:n={}}=e,a={};if(!(0,r.isValidObject)(n)&&!(0,r.isValidObject)(i))return;let o=eO(i);for(let e of s){let s=eP(e);if(!s)continue;a[ew(s)]=o;let i=n?.[`${eg}:${s}`];if(i){let e=i?.[`${eg}:${s}:${t}`];a[ew(s)]=ey(ey({},a[ew(s)]),eO(e||i))}}for(let[e,t]of Object.entries(a))0===Object.keys(t).length&&delete a[e];return Object.keys(a).length>0?a:void 0})(l,c,h)}catch(e){console.warn("Failed to extract capabilities from session",e)}if(o)return o;let f=await this.client.request(e);try{let t,s,i,r;await this.client.session.update(e.topic,{sessionProperties:(i=eG({},l.sessionProperties||{}),r={capabilities:(t=eG({},p||{}),s={[u]:f},ek(t,eJ(s)))},ek(i,eJ(r)))})}catch(e){console.warn("Failed to update session with capabilities",e)}return f}async getCallStatus(e){var t,s,i;let r=this.client.session.get(e.topic),n=null==(t=r.sessionProperties)?void 0:t.bundler_name;if(n){let t=this.getBundlerUrl(e.chainId,n);try{return await this.getUserOperationReceipt(t,e)}catch(e){console.warn("Failed to fetch call status from bundler",e,t)}}let a=null==(s=r.sessionProperties)?void 0:s.bundler_url;if(a)try{return await this.getUserOperationReceipt(a,e)}catch(e){console.warn("Failed to fetch call status from custom bundler",e,a)}let o=await eN({resultId:null==(i=e.request.params)?void 0:i[0],storage:this.storage});if(o)try{return await ex(o,this.getHttpProvider.bind(this))}catch(e){console.warn("Failed to fetch call status from stored send calls",e,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var s;let i=new URL(e),r=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,o.formatJsonRpcRequest)("eth_getUserOperationReceipt",[null==(s=t.request.params)?void 0:s[0]]))});if(!r.ok)throw Error(`Failed to fetch user operation receipt - ${r.status}`);return await r.json()}getBundlerUrl(e,t){return`${S}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}async sendCalls(e){var t,s,i;let r=await this.client.request(e),n=null==(t=e.request.params)?void 0:t[0],a=r?.id,o=r?.capabilities||{},c=null==(s=o?.caip345)?void 0:s.caip2,h=null==(i=o?.caip345)?void 0:i.transactionHashes;return a&&c&&null!=h&&h.length&&await eR({sendCalls:{request:n,result:r},storage:this.storage}),r}}var eZ=Object.defineProperty,eQ=(e,t,s)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?eZ(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s};class eY{constructor(e){eQ(this,"name","solana"),eQ(this,"client"),eQ(this,"httpProviders"),eQ(this,"events"),eQ(this,"namespace"),eQ(this,"chainId"),this.namespace=e.namespace,this.events=el("events"),this.client=el("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(q,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var s;let i=et(t);e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace,this.client.core.projectId);return new I.JsonRpcProvider(new O(s,el("disableProviderPing")))}}var e0=Object.defineProperty,e1=(e,t,s)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?e0(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s};class e2{constructor(e){e1(this,"name","cosmos"),e1(this,"client"),e1(this,"httpProviders"),e1(this,"events"),e1(this,"namespace"),e1(this,"chainId"),this.namespace=e.namespace,this.events=el("events"),this.client=el("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(q,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var s;let i=et(t);e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace,this.client.core.projectId);return new I.JsonRpcProvider(new O(s,el("disableProviderPing")))}}var e3=Object.defineProperty,e5=(e,t,s)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?e3(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s};class e6{constructor(e){e5(this,"name","algorand"),e5(this,"client"),e5(this,"httpProviders"),e5(this,"events"),e5(this,"namespace"),e5(this,"chainId"),this.namespace=e.namespace,this.events=el("events"),this.client=el("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){let s=t||ee(`${this.name}:${e}`,this.namespace,this.client.core.projectId);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(q,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,null==(s=this.namespace.rpcMap)?void 0:s[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new I.JsonRpcProvider(new O(s,el("disableProviderPing")))}}var e8=Object.defineProperty,e4=(e,t,s)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?e8(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s};class e9{constructor(e){e4(this,"name","cip34"),e4(this,"client"),e4(this,"httpProviders"),e4(this,"events"),e4(this,"namespace"),e4(this,"chainId"),this.namespace=e.namespace,this.events=el("events"),this.client=el("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(q,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let s=this.getCardanoRPCUrl(t),i=et(t);e[i]=this.createHttpProvider(i,s)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){let t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||this.getCardanoRPCUrl(e);if(!s)throw Error(`No RPC url provided for chainId: ${e}`);return new I.JsonRpcProvider(new O(s,el("disableProviderPing")))}}var e7=Object.defineProperty,te=(e,t,s)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?e7(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s};class tt{constructor(e){te(this,"name","elrond"),te(this,"client"),te(this,"httpProviders"),te(this,"events"),te(this,"namespace"),te(this,"chainId"),this.namespace=e.namespace,this.events=el("events"),this.client=el("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(q,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var s;let i=et(t);e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace,this.client.core.projectId);return new I.JsonRpcProvider(new O(s,el("disableProviderPing")))}}var ts=Object.defineProperty,ti=(e,t,s)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?ts(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s};class tr{constructor(e){ti(this,"name","multiversx"),ti(this,"client"),ti(this,"httpProviders"),ti(this,"events"),ti(this,"namespace"),ti(this,"chainId"),this.namespace=e.namespace,this.events=el("events"),this.client=el("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(q,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var s;let i=et(t);e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace,this.client.core.projectId);return new I.JsonRpcProvider(new O(s,el("disableProviderPing")))}}var tn=Object.defineProperty,ta=(e,t,s)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?tn(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s};class to{constructor(e){ta(this,"name","near"),ta(this,"client"),ta(this,"httpProviders"),ta(this,"events"),ta(this,"namespace"),ta(this,"chainId"),this.namespace=e.namespace,this.events=el("events"),this.client=el("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let s=t||ee(`${this.name}:${e}`,this.namespace);this.setHttpProvider(e,s)}this.events.emit(q,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,null==(s=this.namespace.rpcMap)?void 0:s[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace);return typeof s>"u"?void 0:new I.JsonRpcProvider(new O(s,el("disableProviderPing")))}}var tc=Object.defineProperty,th=(e,t,s)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?tc(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s};class tl{constructor(e){th(this,"name","tezos"),th(this,"client"),th(this,"httpProviders"),th(this,"events"),th(this,"namespace"),th(this,"chainId"),this.namespace=e.namespace,this.events=el("events"),this.client=el("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let s=t||ee(`${this.name}:${e}`,this.namespace);this.setHttpProvider(e,s)}this.events.emit(q,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace);return typeof s>"u"?void 0:new I.JsonRpcProvider(new O(s))}}var tp=Object.defineProperty,tu=(e,t,s)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?tp(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s};class td{constructor(e){tu(this,"name",A),tu(this,"client"),tu(this,"httpProviders"),tu(this,"events"),tu(this,"namespace"),tu(this,"chainId"),this.namespace=e.namespace,this.events=el("events"),this.client=el("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(q,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return(0,r.parseChainId)(e).namespace}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){var e,t;let s={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach(e=>{s[(0,r.parseChainId)(e).reference]=this.createHttpProvider(e)}),s}getHttpProvider(e){let t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace,this.client.core.projectId);return new I.JsonRpcProvider(new O(s,el("disableProviderPing")))}}var tf=Object.defineProperty,tm=Object.defineProperties,tv=Object.getOwnPropertyDescriptors,ty=Object.getOwnPropertySymbols,tg=Object.prototype.hasOwnProperty,tb=Object.prototype.propertyIsEnumerable,tP=(e,t,s)=>t in e?tf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,tw=(e,t)=>{for(var s in t||(t={}))tg.call(t,s)&&tP(e,s,t[s]);if(ty)for(var s of ty(t))tb.call(t,s)&&tP(e,s,t[s]);return e},tO=(e,t,s)=>tP(e,"symbol"!=typeof t?t+"":t,s);class tI{constructor(e){tO(this,"client"),tO(this,"namespaces"),tO(this,"optionalNamespaces"),tO(this,"sessionProperties"),tO(this,"scopedProperties"),tO(this,"events",new c.default),tO(this,"rpcProviders",{}),tO(this,"session"),tO(this,"providerOpts"),tO(this,"logger"),tO(this,"uri"),tO(this,"disableProviderPing",!1),this.providerOpts=e,this.logger="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,a.pino)((0,n.getDefaultLoggerOptions)({level:e?.logger||C})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){let t=new tI(e);return await t.initialize(),t}async request(e,t,s){let[i,r]=this.validateChain(t);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(i).request({request:tw({},e),chainId:`${i}:${r}`,topic:this.session.topic,expiry:s})}sendAsync(e,t,s,i){let r=new Date().getTime();this.request(e,s,i).then(e=>t(null,(0,o.formatJsonRpcResult)(r,e))).catch(e=>t(e,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:(0,r.getSdkError)("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();let{uri:s,response:i}=await this.client.authenticate(e,t);s&&(this.uri=s,this.events.emit("display_uri",s));let r=await i();if(this.session=r.session,this.session){let e=eo(this.session.namespaces);this.namespaces=er(this.namespaces,e),await this.persist("namespaces",this.namespaces),this.onConnect()}return r}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){let{uri:t,approval:s}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));let i=await s();this.session=i;let r=eo(i.namespaces);return this.namespaces=er(this.namespaces,r),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;let[s,i]=this.validateChain(e);this.getProvider(s).setDefaultChain(i,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");let t=this.client.pairing.getAll();if(!(0,r.isValidArray)(t))return;for(let s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}catch(e){this.logger.warn("Failed to cleanup pending pairings",e)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await i.default.init({core:this.providerOpts.core,logger:this.providerOpts.logger||C,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(s){throw this.logger.error("Failed to get session",s),Error(`The provided session: ${null==(t=null==(e=this.providerOpts)?void 0:e.session)?void 0:t.topic} doesn't exist in the Sign client`)}else{let e=this.client.session.getAll();this.session=e[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let e=[...new Set(Object.keys(this.session.namespaces).map(e=>(0,r.parseNamespaceKey)(e)))];ep("client",this.client),ep("events",this.events),ep("disableProviderPing",this.disableProviderPing),e.forEach(e=>{if(!this.session)return;let t=function(e,t){let s=Object.keys(t.namespaces).filter(t=>t.includes(e));if(!s.length)return[];let i=[];return s.forEach(e=>{let s=t.namespaces[e].accounts;i.push(...s)}),i}(e,this.session);if(t?.length===0)return;let s=es(t),i=tm(tw({},er(this.namespaces,this.optionalNamespaces)[e]),tv({accounts:t,chains:s}));switch(e){case"eip155":this.rpcProviders[e]=new eX({namespace:i});break;case"algorand":this.rpcProviders[e]=new e6({namespace:i});break;case"solana":this.rpcProviders[e]=new eY({namespace:i});break;case"cosmos":this.rpcProviders[e]=new e2({namespace:i});break;case"polkadot":this.rpcProviders[e]=new eM({namespace:i});break;case"cip34":this.rpcProviders[e]=new e9({namespace:i});break;case"elrond":this.rpcProviders[e]=new tt({namespace:i});break;case"multiversx":this.rpcProviders[e]=new tr({namespace:i});break;case"near":this.rpcProviders[e]=new to({namespace:i});break;case"tezos":this.rpcProviders[e]=new tl({namespace:i});break;default:this.rpcProviders[e]=new td({namespace:i})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;let{topic:s}=e;s===(null==(t=this.session)?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;let{params:s,topic:i}=e;if(i!==(null==(t=this.session)?void 0:t.topic))return;let{event:n}=s;if("accountsChanged"===n.name){let e=n.data;e&&(0,r.isValidArray)(e)&&this.events.emit("accountsChanged",e.map(ea))}else if("chainChanged"===n.name){let e=s.chainId,t=s.event.data,i=(0,r.parseNamespaceKey)(e),n=ec(e)!==ec(t)?`${i}:${ec(t)}`:e;this.onChainChanged(n)}else this.events.emit(n.name,n.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s,i;if(e!==(null==(s=this.session)?void 0:s.topic))return;let{namespaces:r}=t,n=null==(i=this.client)?void 0:i.session.get(e);this.session=tm(tw({},n),tv({namespaces:r})),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{var t;e.topic===(null==(t=this.session)?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",tm(tw({},(0,r.getSdkError)("USER_DISCONNECTED")),tv({data:e.topic}))))}),this.on(q,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[A]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){let{namespaces:t={},optionalNamespaces:s={},sessionProperties:i,scopedProperties:r}=e;this.optionalNamespaces=er(t,s),this.sessionProperties=i,this.scopedProperties=r}validateChain(e){let[t,s]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,s];if(t&&!Object.keys(this.namespaces||{}).map(e=>(0,r.parseNamespaceKey)(e)).includes(t))throw Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];let i=(0,r.parseNamespaceKey)(Object.keys(this.namespaces)[0]),n=this.rpcProviders[i].getDefaultChain();return[i,n]}async requestAccounts(){let[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;let[s,i]=this.validateChain(e);if(!i)return;this.updateNamespaceChain(s,i);let r=this.getProvider(s).getDefaultChain();t?(this.events.emit("chainChanged",i),this.emitAccountsChangedOnChainChange({namespace:s,previousChainId:r,newChainId:e})):this.getProvider(s).setDefaultChain(i),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:t,newChainId:s}){var i,n;try{if(t===s)return;let a=null==(n=null==(i=this.session)?void 0:i.namespaces[e])?void 0:n.accounts;if(!a)return;let o=a.filter(e=>e.includes(`${s}:`)).map(ea);if(!(0,r.isValidArray)(o))return;this.events.emit("accountsChanged",o)}catch(e){this.logger.warn("Failed to emit accountsChanged on chain change",e)}}updateNamespaceChain(e,t){if(!this.namespaces)return;let s=this.namespaces[e]?e:`${e}:${t}`;this.namespaces[s]?this.namespaces[s]&&(this.namespaces[s].defaultChain=t):this.namespaces[s]={chains:[],methods:[],events:[],defaultChain:t}}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var s;let i=(null==(s=this.session)?void 0:s.topic)||"";await this.client.core.storage.setItem(`${j}/${e}${i}`,t)}async getFromStore(e){var t;let s=(null==(t=this.session)?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${j}/${e}${s}`)}async deleteFromStore(e){var t;let s=(null==(t=this.session)?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${j}/${e}${s}`)}async cleanupStorage(){var e;try{if((null==(e=this.client)?void 0:e.session.length)>0)return;for(let e of(await this.client.core.storage.getKeys()))e.startsWith(j)&&await this.client.core.storage.removeItem(e)}catch(e){this.logger.warn("Failed to cleanup storage",e)}}}e.s(["UniversalProvider",()=>tI,"default",()=>tI],626321)}]);