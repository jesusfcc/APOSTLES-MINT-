{"version":3,"sources":["../../../../node_modules/thirdweb/src/wallets/constants.ts","../../../../node_modules/thirdweb/src/wallets/utils/chains.ts","../../../../node_modules/thirdweb/src/wallets/eip5792/get-capabilities.ts","../../../../node_modules/thirdweb/src/wallets/eip5792/get-calls-status.ts","../../../../node_modules/thirdweb/src/wallets/coinbase/coinbase-web.ts","../../../../node_modules/thirdweb/src/transaction/actions/encode.ts","../../../../node_modules/ox/core/Solidity.ts","../../../../node_modules/ox/core/Caches.ts","../../../../node_modules/ox/core/internal/lru.ts","../../../../node_modules/ox/core/Hash.ts","../../../../node_modules/ox/core/Address.ts","../../../../node_modules/thirdweb/src/wallets/coinbase/utils.ts","../../../../node_modules/thirdweb/src/wallets/eip5792/send-calls.ts"],"sourcesContent":["import type { WalletId } from \"./wallet-types.js\";\n\n// Constants for most common wallets\nexport const COINBASE = \"com.coinbase.wallet\";\nexport const METAMASK = \"io.metamask\";\nexport const RAINBOW = \"me.rainbow\";\nexport const ZERION = \"io.zerion.wallet\";\n\n// Wallet IDs that should not appear in searchable wallet lists\nexport const NON_SEARCHABLE_WALLETS: WalletId[] = [\n  \"inApp\",\n  \"embedded\",\n  \"smart\",\n  \"xyz.abs\",\n];\n","import type { ChainMetadata } from \"../../chains/types.js\";\n\n// TODO - move this to chains subfolder\n\n/**\n * Remove client id from RPC url for given chain\n * @internal\n */\nexport function getValidPublicRPCUrl(chain: ChainMetadata) {\n  return getValidChainRPCs(chain).map((rpc) => {\n    try {\n      const url = new URL(rpc);\n      // remove client id from url\n      if (url.hostname.endsWith(\".thirdweb.com\")) {\n        url.pathname = \"\";\n        url.search = \"\";\n      }\n      return url.toString();\n    } catch {\n      return rpc;\n    }\n  });\n}\n\n// TODO - move this to chains/\n/**\n * Get valid RPCs for given chain\n * @internal\n */\nfunction getValidChainRPCs(\n  chain: Pick<ChainMetadata, \"rpc\" | \"chainId\">,\n  clientId?: string,\n  mode: \"http\" | \"ws\" = \"http\",\n): string[] {\n  const processedRPCs: string[] = [];\n\n  for (const rpc of chain.rpc) {\n    // exclude RPC if mode mismatch\n    if (mode === \"http\" && !rpc.startsWith(\"http\")) {\n      continue;\n    }\n\n    if (mode === \"ws\" && !rpc.startsWith(\"ws\")) {\n      continue;\n    }\n\n    // Replace API_KEY placeholder with value\n    // biome-ignore lint/suspicious/noTemplateCurlyInString: this is valid\n    if (rpc.includes(\"${THIRDWEB_API_KEY}\")) {\n      if (clientId) {\n        processedRPCs.push(\n          // biome-ignore lint/suspicious/noTemplateCurlyInString: this is what the string to replace looks like in this case\n          rpc.replace(\"${THIRDWEB_API_KEY}\", clientId) +\n            (typeof globalThis !== \"undefined\" && \"APP_BUNDLE_ID\" in globalThis\n              ? // @ts-expect-error\n                `/?bundleId=${globalThis.APP_BUNDLE_ID}`\n              : \"\"),\n        );\n      } else {\n        // if no client id, let it through with empty string\n        // if secretKey is present, it will be used in header\n        // if none are passed, will have reduced access\n        // biome-ignore lint/suspicious/noTemplateCurlyInString: this is what the string to replace looks like in this case\n        processedRPCs.push(rpc.replace(\"${THIRDWEB_API_KEY}\", \"\"));\n      }\n    }\n\n    // exclude RPCs with unknown placeholder\n    else if (rpc.includes(\"${\")) {\n      // do nothing (just don't add it to the list)\n    }\n\n    // add as is\n    else {\n      processedRPCs.push(rpc);\n    }\n  }\n\n  if (processedRPCs.length === 0) {\n    throw new Error(\n      `No RPC available for chainId \"${chain.chainId}\" with mode ${mode}`,\n    );\n  }\n\n  return processedRPCs;\n}\n","import type { Prettify } from \"../../utils/type-utils.js\";\nimport type { Wallet } from \"../interfaces/wallet.js\";\nimport type { WalletId } from \"../wallet-types.js\";\nimport type { WalletCapabilities, WalletCapabilitiesRecord } from \"./types.js\";\n\nexport type GetCapabilitiesOptions<ID extends WalletId = WalletId> = {\n  wallet: Wallet<ID>;\n  chainId?: number;\n};\n\nexport type GetCapabilitiesResult = Prettify<\n  WalletCapabilitiesRecord<WalletCapabilities, number>\n>;\n\n/**\n * Get the capabilities of a wallet based on the [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) specification.\n *\n *  This function is dependent on the wallet's support for EIP-5792, but will not throw.\n * **The returned object contains a `message` field detailing any issues with the wallet's support for EIP-5792.**\n *\n * @param {GetCapabilitiesOptions} options\n * @param {Wallet} options.wallet - The wallet to get the capabilities of.\n * @returns {Promise<GetCapabilitiesResult>} - A promise that resolves to the capabilities of the wallet based on the [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) spec.\n * @beta\n * @example\n * ```ts\n * import { getCapabilities } from \"thirdweb/wallets/eip5792\";\n *\n * const wallet = createWallet(\"com.coinbase.wallet\");\n * const capabilities = await getCapabilities({ wallet });\n * ```\n *\n * @extension EIP5792\n */\nexport async function getCapabilities<const ID extends WalletId = WalletId>({\n  wallet,\n  chainId,\n}: GetCapabilitiesOptions<ID>): Promise<GetCapabilitiesResult> {\n  const account = wallet.getAccount();\n  if (!account) {\n    return {\n      message: `Can't get capabilities, no account connected for wallet: ${wallet.id}`,\n    };\n  }\n\n  if (account.getCapabilities) {\n    return account.getCapabilities({ chainId });\n  }\n\n  throw new Error(\n    `Failed to get capabilities, wallet ${wallet.id} does not support EIP-5792`,\n  );\n}\n\nexport function toGetCapabilitiesResult(\n  result: Record<string, WalletCapabilities>,\n  chainIdFilter?: number,\n): GetCapabilitiesResult {\n  const capabilities = {} as WalletCapabilitiesRecord<\n    WalletCapabilities,\n    number\n  >;\n  for (const [chainId, capabilities_] of Object.entries(result)) {\n    capabilities[Number(chainId)] = {};\n    const capabilitiesCopy = {} as WalletCapabilities;\n    for (const [key, value] of Object.entries(capabilities_)) {\n      capabilitiesCopy[key] = value;\n    }\n    capabilities[Number(chainId)] = capabilitiesCopy;\n  }\n  return (\n    typeof chainIdFilter === \"number\"\n      ? { [chainIdFilter]: capabilities[chainIdFilter] }\n      : capabilities\n  ) as never;\n}\n","import type { ThirdwebClient } from \"../../client/client.js\";\nimport { hexToBigInt, hexToNumber } from \"../../utils/encoding/hex.js\";\nimport type { Wallet } from \"../interfaces/wallet.js\";\nimport type {\n  GetCallsStatusRawResponse,\n  GetCallsStatusResponse,\n  WalletSendCallsId,\n} from \"./types.js\";\n\nexport type GetCallsStatusOptions = {\n  wallet: Wallet;\n  client: ThirdwebClient;\n  id: WalletSendCallsId;\n};\n\n/**\n * Get the status of an [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) bundle.\n *\n *  This function is dependent on the wallet's support for EIP-5792 and could fail.\n *\n * @param {GetCallsStatusOptions} options\n * @param {Wallet} options.wallet - The wallet that send the original calls.\n * @param {ThirdwebClient} options.client - A {@link ThirdwebClient} instance.\n * @param {WalletSendCallsId} options.bundleId - The ID of the bundle to get the status of.\n * @throws an error if the wallet does not support EIP-5792.\n * @returns {Promise<GetCallsStatusResponse>} - A promise that resolves to the bundle's status and receipts (if available). {@link GetCallsStatusResponse}\n * @beta\n * @example\n * ```ts\n *  import { createThirdwebClient } from \"thirdweb\";\n *  import { sendCalls, getCallsStatus } from \"thirdweb/wallets/eip5792\";\n *\n *  const client = createThirdwebClient({ clientId: ... });\n *\n *  const result = await sendCalls({ wallet, client, calls });\n *\n *  let result;\n *  while (result.status !== \"success\") {\n *    result = await getCallsStatus(result);\n *  }\n * ```\n * @extension EIP5792\n */\nexport async function getCallsStatus({\n  wallet,\n  client,\n  id,\n}: GetCallsStatusOptions): Promise<GetCallsStatusResponse> {\n  const account = wallet.getAccount();\n  if (!account) {\n    throw new Error(\n      `Failed to get call status, no account found for wallet ${wallet.id}`,\n    );\n  }\n\n  const chain = wallet.getChain();\n  if (!chain) {\n    throw new Error(\n      `Failed to get call status, no chain found for wallet ${wallet.id}`,\n    );\n  }\n\n  if (account.getCallsStatus) {\n    return account.getCallsStatus({ id, chain, client });\n  }\n\n  throw new Error(\n    `Failed to get call status, wallet ${wallet.id} does not support EIP-5792`,\n  );\n}\n\nconst receiptStatuses = {\n  \"0x0\": \"reverted\",\n  \"0x1\": \"success\",\n} as const;\n\nexport function toGetCallsStatusResponse(\n  response: GetCallsStatusRawResponse,\n): GetCallsStatusResponse {\n  const [status, statusCode] = (() => {\n    const statusCode = response.status;\n    if (statusCode >= 100 && statusCode < 200)\n      return [\"pending\", statusCode] as const;\n    if (statusCode >= 200 && statusCode < 300)\n      return [\"success\", statusCode] as const;\n    if (statusCode >= 300 && statusCode < 700)\n      return [\"failure\", statusCode] as const;\n    // @ts-expect-error: for backwards compatibility\n    if (statusCode === \"CONFIRMED\") return [\"success\", 200] as const;\n    // @ts-expect-error: for backwards compatibility\n    if (statusCode === \"PENDING\") return [\"pending\", 100] as const;\n    return [undefined, statusCode];\n  })();\n  return {\n    ...response,\n    atomic: response.atomic,\n    // @ts-expect-error: for backwards compatibility\n    chainId: response.chainId ? hexToNumber(response.chainId) : undefined,\n    receipts:\n      response.receipts?.map((receipt) => ({\n        ...receipt,\n        blockNumber: hexToBigInt(receipt.blockNumber),\n        gasUsed: hexToBigInt(receipt.gasUsed),\n        status: receiptStatuses[receipt.status as \"0x0\" | \"0x1\"],\n      })) ?? [],\n    status,\n    statusCode,\n    version: response.version,\n  };\n}\n","import type { ProviderInterface } from \"@coinbase/wallet-sdk\";\nimport type { Preference } from \"@coinbase/wallet-sdk/dist/core/provider/interface.js\";\nimport type { Address } from \"abitype\";\nimport * as ox__Hex from \"ox/Hex\";\nimport * as ox__TypedData from \"ox/TypedData\";\nimport { trackTransaction } from \"../../analytics/track/transaction.js\";\nimport type { Chain } from \"../../chains/types.js\";\nimport { getCachedChain, getChainMetadata } from \"../../chains/utils.js\";\nimport type { ThirdwebClient } from \"../../client/client.js\";\nimport { getAddress } from \"../../utils/address.js\";\nimport {\n  type Hex,\n  numberToHex,\n  stringToHex,\n  uint8ArrayToHex,\n} from \"../../utils/encoding/hex.js\";\nimport { stringify } from \"../../utils/json.js\";\nimport { parseTypedData } from \"../../utils/signatures/helpers/parse-typed-data.js\";\nimport { COINBASE } from \"../constants.js\";\nimport { toGetCallsStatusResponse } from \"../eip5792/get-calls-status.js\";\nimport { toGetCapabilitiesResult } from \"../eip5792/get-capabilities.js\";\nimport { toProviderCallParams } from \"../eip5792/send-calls.js\";\nimport type {\n  GetCallsStatusRawResponse,\n  WalletCapabilities,\n} from \"../eip5792/types.js\";\nimport type {\n  Account,\n  SendTransactionOption,\n  Wallet,\n} from \"../interfaces/wallet.js\";\nimport type { AppMetadata, DisconnectFn, SwitchChainFn } from \"../types.js\";\nimport { getValidPublicRPCUrl } from \"../utils/chains.js\";\nimport { getDefaultAppMetadata } from \"../utils/defaultDappMetadata.js\";\nimport { normalizeChainId } from \"../utils/normalizeChainId.js\";\nimport type { WalletEmitter } from \"../wallet-emitter.js\";\nimport type {\n  CreateWalletArgs,\n  WalletConnectionOption,\n} from \"../wallet-types.js\";\nimport { showCoinbasePopup } from \"./utils.js\";\n\nexport type CoinbaseWalletCreationOptions =\n  | {\n      /**\n       * Metadata of the dApp that will be passed to connected wallet.\n       *\n       * Some wallets may display this information to the user.\n       *\n       * Setting this property is highly recommended. If this is not set, Below default metadata will be used:\n       *\n       * ```ts\n       * {\n       *   name: \"thirdweb powered dApp\",\n       *   url: \"https://thirdweb.com\",\n       *   description: \"thirdweb powered dApp\",\n       *   logoUrl: \"https://thirdweb.com/favicon.ico\",\n       * };\n       * ```\n       */\n      appMetadata?: AppMetadata;\n\n      /**\n       * Wallet configuration, choices are 'all' | 'smartWalletOnly' | 'eoaOnly'\n       * @default 'all'\n       * @example\n       * ```ts\n       * {\n       *  walletConfig: {\n       *   options: 'all',\n       *  }\n       * }\n       * ```\n       */\n      walletConfig?: Preference;\n\n      /**\n       * Chains that the wallet can switch chains to, will default to the first chain in this array on first connection.\n       * @default Ethereum mainnet\n       * @example\n       * ```ts\n       * {\n       *   chains: [base, optimisim]\n       * }\n       */\n      chains?: Chain[];\n\n      mobileConfig?: {\n        /**\n         * The univeral callback URL to redirect the user to after they have completed the wallet connection with the cb wallet app.\n         * This needs to be setup as a Universal link for iOS https://docs.cdp.coinbase.com/wallet-sdk/docs/ios-setup/\n         * and App link on Android https://docs.cdp.coinbase.com/wallet-sdk/docs/android-setup/\n         */\n        callbackURL?: string;\n      };\n    }\n  | undefined;\n\n/**\n * Options for connecting to the CoinbaseSDK Wallet\n */\nexport type CoinbaseSDKWalletConnectionOptions = {\n  /**\n   * The Thirdweb client object\n   */\n  client: ThirdwebClient;\n\n  /**\n   * If you want the wallet to be connected to a specific blockchain, you can pass a `Chain` object to the `connect` method.\n   * This will trigger a chain switch if the wallet provider is not already connected to the specified chain.\n   *\n   * You can create a `Chain` object using the [`defineChain`](https://portal.thirdweb.com/references/typescript/v5/defineChain) function.\n   * At minimum, you need to pass the `id` of the blockchain.\n   *\n   * ```ts\n   * import { defineChain } from \"thirdweb\";\n   * const myChain = defineChain(myChainId);\n   *\n   * const address = await wallet.connect({ chain: myChain })\n   */\n  chain?: Chain;\n};\n\n// Need to keep the provider around because it keeps a single popup window connection behind the scenes\n// this should be ok since all the creation options are provided at build time\nlet _provider: ProviderInterface | undefined;\n\n/**\n * @internal\n */\nexport async function getCoinbaseWebProvider(\n  options?: CreateWalletArgs<typeof COINBASE>[1],\n): Promise<ProviderInterface> {\n  if (!_provider) {\n    let CoinbaseWalletSDK: unknown = (await import(\"@coinbase/wallet-sdk\"))\n      .default;\n    // Workaround for Vite dev import errors\n    // https://github.com/vitejs/vite/issues/7112\n    if (\n      typeof CoinbaseWalletSDK !== \"function\" &&\n      typeof (CoinbaseWalletSDK as { default: unknown }).default === \"function\"\n    ) {\n      CoinbaseWalletSDK = (\n        CoinbaseWalletSDK as unknown as { default: typeof CoinbaseWalletSDK }\n      ).default;\n    }\n\n    // @ts-expect-error This import error is not visible to TypeScript\n    const client = new CoinbaseWalletSDK({\n      appChainIds: options?.chains\n        ? options.chains.map((c) => c.id)\n        : undefined,\n      appLogoUrl:\n        options?.appMetadata?.logoUrl || getDefaultAppMetadata().logoUrl,\n      appName: options?.appMetadata?.name || getDefaultAppMetadata().name,\n    });\n\n    const provider = client.makeWeb3Provider(options?.walletConfig);\n    _provider = provider;\n    return provider;\n  }\n  return _provider;\n}\n\n/**\n * Checks if the provided wallet is a Coinbase SDK wallet.\n *\n * @param wallet - The wallet to check.\n * @returns True if the wallet is a Coinbase SDK wallet, false otherwise.\n */\nexport function isCoinbaseSDKWallet(\n  wallet: Wallet,\n): wallet is Wallet<typeof COINBASE> {\n  return wallet.id === COINBASE;\n}\n\nfunction createAccount({\n  provider,\n  address,\n  client,\n}: {\n  provider: ProviderInterface;\n  address: string;\n  client: ThirdwebClient;\n}) {\n  const account: Account = {\n    address: getAddress(address),\n    onTransactionRequested: async () => {\n      // make sure to show the coinbase popup BEFORE doing any transaction preprocessing\n      // otherwise the popup might get blocked in safari\n      // but only if using cb smart wallet (web based)\n      if (window.localStorage) {\n        // this is the local storage key for the signer type in the cb web sdk\n        // value can be \"scw\" (web) or \"walletlink\" (mobile wallet)\n        const signerType = window.localStorage.getItem(\n          \"-CBWSDK:SignerConfigurator:SignerType\",\n        );\n        if (signerType === \"scw\") {\n          await showCoinbasePopup(provider);\n        }\n      }\n    },\n    async sendTransaction(tx: SendTransactionOption) {\n      const transactionHash = (await provider.request({\n        method: \"eth_sendTransaction\",\n        params: [\n          {\n            accessList: tx.accessList,\n            data: tx.data,\n            from: getAddress(address),\n            gas: tx.gas ? numberToHex(tx.gas) : undefined,\n            to: tx.to as Address,\n            value: tx.value ? numberToHex(tx.value) : undefined,\n          },\n        ],\n      })) as Hex;\n\n      trackTransaction({\n        chainId: tx.chainId,\n        client: client,\n        contractAddress: tx.to ?? undefined,\n        gasPrice: tx.gasPrice,\n        transactionHash,\n        walletAddress: getAddress(address),\n        walletType: COINBASE,\n      });\n\n      return {\n        transactionHash,\n      };\n    },\n    async signMessage({ message }) {\n      if (!account.address) {\n        throw new Error(\"Provider not setup\");\n      }\n\n      const messageToSign = (() => {\n        if (typeof message === \"string\") {\n          return stringToHex(message);\n        }\n        if (message.raw instanceof Uint8Array) {\n          return uint8ArrayToHex(message.raw);\n        }\n        return message.raw;\n      })();\n\n      const res = await provider.request({\n        method: \"personal_sign\",\n        params: [messageToSign, account.address],\n      });\n      if (!ox__Hex.validate(res)) {\n        throw new Error(\"Invalid signature returned\");\n      }\n      return res;\n    },\n    async signTypedData(typedData) {\n      if (!account.address) {\n        throw new Error(\"Provider not setup\");\n      }\n\n      const { domain, message, primaryType } = parseTypedData(\n        typedData,\n      ) as ox__TypedData.Definition;\n\n      const types = {\n        EIP712Domain: ox__TypedData.extractEip712DomainTypes(domain),\n        ...typedData.types,\n      };\n\n      // Need to do a runtime validation check on addresses, byte ranges, integer ranges, etc\n      // as we can't statically check this with TypeScript.\n      ox__TypedData.validate({ domain, message, primaryType, types });\n\n      const stringifiedData = ox__TypedData.serialize({\n        domain: domain ?? {},\n        message,\n        primaryType,\n        types,\n      });\n\n      const res = await provider.request({\n        method: \"eth_signTypedData_v4\",\n        params: [account.address, stringifiedData],\n      });\n      if (!ox__Hex.validate(res)) {\n        throw new Error(\"Invalid signed payload returned\");\n      }\n      return res;\n    },\n    sendCalls: async (options) => {\n      try {\n        const { callParams, chain } = await toProviderCallParams(\n          options,\n          account,\n        );\n        const callId = await provider.request({\n          method: \"wallet_sendCalls\",\n          params: callParams,\n        });\n        if (callId && typeof callId === \"object\" && \"id\" in callId) {\n          return { chain, client, id: callId.id as string };\n        }\n        return { chain, client, id: callId as string };\n      } catch (error) {\n        if (/unsupport|not support/i.test((error as Error).message)) {\n          throw new Error(\n            `${COINBASE} errored calling wallet_sendCalls, with error: ${error instanceof Error ? error.message : stringify(error)}`,\n          );\n        }\n        throw error;\n      }\n    },\n    async getCallsStatus(options) {\n      try {\n        const rawResponse = (await provider.request({\n          method: \"wallet_getCallsStatus\",\n          params: [options.id],\n        })) as GetCallsStatusRawResponse;\n        return toGetCallsStatusResponse(rawResponse);\n      } catch (error) {\n        if (/unsupport|not support/i.test((error as Error).message)) {\n          throw new Error(\n            `${COINBASE} does not support wallet_getCallsStatus, reach out to them directly to request EIP-5792 support.`,\n          );\n        }\n        throw error;\n      }\n    },\n    async getCapabilities(options) {\n      const chainId = options.chainId;\n      try {\n        const result = (await provider.request({\n          method: \"wallet_getCapabilities\",\n          params: [getAddress(account.address)],\n        })) as Record<string, WalletCapabilities>;\n        return toGetCapabilitiesResult(result, chainId);\n      } catch (error: unknown) {\n        if (\n          /unsupport|not support|not available/i.test((error as Error).message)\n        ) {\n          return {\n            message: `${COINBASE} does not support wallet_getCapabilities, reach out to them directly to request EIP-5792 support.`,\n          };\n        }\n        throw error;\n      }\n    },\n  };\n\n  return account;\n}\n\nfunction onConnect(\n  address: string,\n  chain: Chain,\n  provider: ProviderInterface,\n  emitter: WalletEmitter<typeof COINBASE>,\n  client: ThirdwebClient,\n): [Account, Chain, DisconnectFn, SwitchChainFn] {\n  const account = createAccount({ address, client, provider });\n\n  async function disconnect() {\n    provider.removeListener(\"accountsChanged\", onAccountsChanged);\n    provider.removeListener(\"chainChanged\", onChainChanged);\n    provider.removeListener(\"disconnect\", onDisconnect);\n    await provider.disconnect();\n  }\n\n  async function onDisconnect() {\n    disconnect();\n    emitter.emit(\"disconnect\", undefined);\n  }\n\n  function onAccountsChanged(accounts: string[]) {\n    if (accounts[0]) {\n      const newAccount = createAccount({\n        address: getAddress(accounts[0]),\n        client,\n        provider,\n      });\n      emitter.emit(\"accountChanged\", newAccount);\n      emitter.emit(\"accountsChanged\", accounts);\n    } else {\n      onDisconnect();\n    }\n  }\n\n  function onChainChanged(newChainId: string) {\n    const newChain = getCachedChain(normalizeChainId(newChainId));\n    emitter.emit(\"chainChanged\", newChain);\n  }\n\n  // subscribe to events\n  provider.on(\"accountsChanged\", onAccountsChanged);\n  provider.on(\"chainChanged\", onChainChanged);\n  provider.on(\"disconnect\", onDisconnect);\n\n  return [\n    account,\n    chain,\n    onDisconnect,\n    (newChain) => switchChainCoinbaseWalletSDK(provider, newChain),\n  ];\n}\n\n/**\n * @internal\n */\nexport async function connectCoinbaseWalletSDK(\n  options: WalletConnectionOption<typeof COINBASE>,\n  emitter: WalletEmitter<typeof COINBASE>,\n  provider: ProviderInterface,\n): Promise<ReturnType<typeof onConnect>> {\n  const accounts = (await provider.request({\n    method: \"eth_requestAccounts\",\n  })) as string[];\n\n  if (!accounts[0]) {\n    throw new Error(\"No accounts found\");\n  }\n\n  const address = getAddress(accounts[0]);\n\n  const connectedChainId = (await provider.request({\n    method: \"eth_chainId\",\n  })) as string | number;\n\n  const chainId = normalizeChainId(connectedChainId);\n  let chain =\n    options.chain && options.chain.id === chainId\n      ? options.chain\n      : getCachedChain(chainId);\n  // Switch to chain if provided\n  if (chainId && options?.chain && chainId !== options?.chain.id) {\n    await switchChainCoinbaseWalletSDK(provider, options.chain);\n    chain = options.chain;\n  }\n\n  return onConnect(address, chain, provider, emitter, options.client);\n}\n\n/**\n * @internal\n */\nexport async function autoConnectCoinbaseWalletSDK(\n  options: WalletConnectionOption<typeof COINBASE>,\n  emitter: WalletEmitter<typeof COINBASE>,\n  provider: ProviderInterface,\n): Promise<ReturnType<typeof onConnect>> {\n  // connected accounts\n  const addresses = (await provider.request({\n    method: \"eth_accounts\",\n  })) as string[];\n\n  const address = addresses[0];\n\n  if (!address) {\n    throw new Error(\"No accounts found\");\n  }\n\n  const connectedChainId = (await provider.request({\n    method: \"eth_chainId\",\n  })) as string | number;\n  const chainId = normalizeChainId(connectedChainId);\n  const chain =\n    options.chain && options.chain.id === chainId\n      ? options.chain\n      : getCachedChain(chainId);\n\n  return onConnect(address, chain, provider, emitter, options.client);\n}\n\nasync function switchChainCoinbaseWalletSDK(\n  provider: ProviderInterface,\n  chain: Chain,\n) {\n  // check if chain is already connected\n  const connectedChainId = (await provider.request({\n    method: \"eth_chainId\",\n  })) as string | number;\n  const connectedChain = getCachedChain(normalizeChainId(connectedChainId));\n  if (connectedChain?.id === chain.id) {\n    // chain is already connected, no need to switch\n    return;\n  }\n\n  const chainIdHex = numberToHex(chain.id);\n\n  try {\n    await provider.request({\n      method: \"wallet_switchEthereumChain\",\n      params: [{ chainId: chainIdHex }],\n    });\n  } catch (error) {\n    const apiChain = await getChainMetadata(chain);\n\n    // Indicates chain is not added to provider\n    // biome-ignore lint/suspicious/noExplicitAny: TODO: fix later\n    if ((error as any)?.code === 4902) {\n      // try to add the chain\n      await provider.request({\n        method: \"wallet_addEthereumChain\",\n        params: [\n          {\n            blockExplorerUrls: apiChain.explorers?.map((x) => x.url) || [],\n            chainId: chainIdHex,\n            chainName: apiChain.name,\n            nativeCurrency: apiChain.nativeCurrency, // no client id on purpose here\n            rpcUrls: getValidPublicRPCUrl(apiChain),\n          },\n        ],\n      });\n    }\n  }\n}\n","import type { Abi, AbiFunction } from \"abitype\";\nimport type { Hex } from \"../../utils/encoding/hex.js\";\nimport type { PreparedTransaction } from \"../prepare-transaction.js\";\n\nconst encodeWeakMap = new WeakMap<\n  PreparedTransaction<Abi, AbiFunction>,\n  Promise<Hex>\n>();\n\n/**\n * Encodes a transaction object into a hexadecimal string representation of the encoded data.\n * @param transaction - The transaction object to encode.\n * @returns A promise that resolves to the encoded data as a hexadecimal string.\n * @transaction\n * @example\n * ```ts\n * import { encode } from \"thirdweb\";\n * const encodedData = await encode(transaction);\n * ```\n */\nexport async function encode<abi extends Abi, abiFn extends AbiFunction>(\n  transaction: PreparedTransaction<abi, abiFn>,\n): Promise<Hex> {\n  if (encodeWeakMap.has(transaction)) {\n    // biome-ignore lint/style/noNonNullAssertion: the `has` above ensures that this will always be set\n    return encodeWeakMap.get(transaction)!;\n  }\n  const promise = (async () => {\n    const [data, extraData, { concatHex }] = await Promise.all([\n      getDataFromTx(transaction),\n      getExtraCallDataFromTx(transaction),\n      import(\"../../utils/encoding/helpers/concat-hex.js\"),\n    ]);\n    if (extraData) {\n      return concatHex([data, extraData]);\n    }\n    return data;\n  })();\n  encodeWeakMap.set(transaction, promise);\n  return promise;\n}\n\n/**\n * Get the transaction.data (from a PreparedTransaction)\n * If the transaction does not have `data`, we default to \"0x\"\n * @internal\n */\nexport async function getDataFromTx<abi extends Abi, abiFn extends AbiFunction>(\n  transaction: PreparedTransaction<abi, abiFn>,\n): Promise<Hex> {\n  if (transaction.data === undefined) {\n    return \"0x\";\n  }\n  if (typeof transaction.data === \"function\") {\n    const data = await transaction.data();\n    if (!data) {\n      return \"0x\";\n    }\n    return data;\n  }\n  return transaction.data;\n}\n\n/**\n * Get the extraCallData from a PreparedTransaction\n * @internal\n * If extraCallData is \"0x\", we will return `undefined`\n * to simplify the code, since concatenating \"0x\" doesn't do anything\n */\nexport async function getExtraCallDataFromTx<\n  abi extends Abi,\n  abiFn extends AbiFunction,\n>(transaction: PreparedTransaction<abi, abiFn>): Promise<Hex | undefined> {\n  if (!transaction.extraCallData) {\n    return undefined;\n  }\n  if (typeof transaction.extraCallData === \"function\") {\n    const extraData = await transaction.extraCallData();\n    if (!extraData) return undefined;\n    if (!extraData.startsWith(\"0x\")) {\n      throw Error(\"Invalid extra calldata - must be a hex string\");\n    }\n    if (extraData === \"0x\") {\n      return undefined;\n    }\n    return extraData;\n  }\n  if (!transaction.extraCallData.startsWith(\"0x\")) {\n    throw Error(\"Invalid extra calldata - must be a hex string\");\n  }\n  return transaction.extraCallData;\n}\n","export const arrayRegex = /^(.*)\\[([0-9]*)\\]$/\n\n// `bytes<M>`: binary type of `M` bytes, `0 < M <= 32`\n// https://regexr.com/6va55\nexport const bytesRegex = /^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/\n\n// `(u)int<M>`: (un)signed integer type of `M` bits, `0 < M <= 256`, `M % 8 == 0`\n// https://regexr.com/6v8hp\nexport const integerRegex =\n  /^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/\n\nexport const maxInt8 = 2n ** (8n - 1n) - 1n\nexport const maxInt16 = 2n ** (16n - 1n) - 1n\nexport const maxInt24 = 2n ** (24n - 1n) - 1n\nexport const maxInt32 = 2n ** (32n - 1n) - 1n\nexport const maxInt40 = 2n ** (40n - 1n) - 1n\nexport const maxInt48 = 2n ** (48n - 1n) - 1n\nexport const maxInt56 = 2n ** (56n - 1n) - 1n\nexport const maxInt64 = 2n ** (64n - 1n) - 1n\nexport const maxInt72 = 2n ** (72n - 1n) - 1n\nexport const maxInt80 = 2n ** (80n - 1n) - 1n\nexport const maxInt88 = 2n ** (88n - 1n) - 1n\nexport const maxInt96 = 2n ** (96n - 1n) - 1n\nexport const maxInt104 = 2n ** (104n - 1n) - 1n\nexport const maxInt112 = 2n ** (112n - 1n) - 1n\nexport const maxInt120 = 2n ** (120n - 1n) - 1n\nexport const maxInt128 = 2n ** (128n - 1n) - 1n\nexport const maxInt136 = 2n ** (136n - 1n) - 1n\nexport const maxInt144 = 2n ** (144n - 1n) - 1n\nexport const maxInt152 = 2n ** (152n - 1n) - 1n\nexport const maxInt160 = 2n ** (160n - 1n) - 1n\nexport const maxInt168 = 2n ** (168n - 1n) - 1n\nexport const maxInt176 = 2n ** (176n - 1n) - 1n\nexport const maxInt184 = 2n ** (184n - 1n) - 1n\nexport const maxInt192 = 2n ** (192n - 1n) - 1n\nexport const maxInt200 = 2n ** (200n - 1n) - 1n\nexport const maxInt208 = 2n ** (208n - 1n) - 1n\nexport const maxInt216 = 2n ** (216n - 1n) - 1n\nexport const maxInt224 = 2n ** (224n - 1n) - 1n\nexport const maxInt232 = 2n ** (232n - 1n) - 1n\nexport const maxInt240 = 2n ** (240n - 1n) - 1n\nexport const maxInt248 = 2n ** (248n - 1n) - 1n\nexport const maxInt256 = 2n ** (256n - 1n) - 1n\n\nexport const minInt8 = -(2n ** (8n - 1n))\nexport const minInt16 = -(2n ** (16n - 1n))\nexport const minInt24 = -(2n ** (24n - 1n))\nexport const minInt32 = -(2n ** (32n - 1n))\nexport const minInt40 = -(2n ** (40n - 1n))\nexport const minInt48 = -(2n ** (48n - 1n))\nexport const minInt56 = -(2n ** (56n - 1n))\nexport const minInt64 = -(2n ** (64n - 1n))\nexport const minInt72 = -(2n ** (72n - 1n))\nexport const minInt80 = -(2n ** (80n - 1n))\nexport const minInt88 = -(2n ** (88n - 1n))\nexport const minInt96 = -(2n ** (96n - 1n))\nexport const minInt104 = -(2n ** (104n - 1n))\nexport const minInt112 = -(2n ** (112n - 1n))\nexport const minInt120 = -(2n ** (120n - 1n))\nexport const minInt128 = -(2n ** (128n - 1n))\nexport const minInt136 = -(2n ** (136n - 1n))\nexport const minInt144 = -(2n ** (144n - 1n))\nexport const minInt152 = -(2n ** (152n - 1n))\nexport const minInt160 = -(2n ** (160n - 1n))\nexport const minInt168 = -(2n ** (168n - 1n))\nexport const minInt176 = -(2n ** (176n - 1n))\nexport const minInt184 = -(2n ** (184n - 1n))\nexport const minInt192 = -(2n ** (192n - 1n))\nexport const minInt200 = -(2n ** (200n - 1n))\nexport const minInt208 = -(2n ** (208n - 1n))\nexport const minInt216 = -(2n ** (216n - 1n))\nexport const minInt224 = -(2n ** (224n - 1n))\nexport const minInt232 = -(2n ** (232n - 1n))\nexport const minInt240 = -(2n ** (240n - 1n))\nexport const minInt248 = -(2n ** (248n - 1n))\nexport const minInt256 = -(2n ** (256n - 1n))\n\nexport const maxUint8 = 2n ** 8n - 1n\nexport const maxUint16 = 2n ** 16n - 1n\nexport const maxUint24 = 2n ** 24n - 1n\nexport const maxUint32 = 2n ** 32n - 1n\nexport const maxUint40 = 2n ** 40n - 1n\nexport const maxUint48 = 2n ** 48n - 1n\nexport const maxUint56 = 2n ** 56n - 1n\nexport const maxUint64 = 2n ** 64n - 1n\nexport const maxUint72 = 2n ** 72n - 1n\nexport const maxUint80 = 2n ** 80n - 1n\nexport const maxUint88 = 2n ** 88n - 1n\nexport const maxUint96 = 2n ** 96n - 1n\nexport const maxUint104 = 2n ** 104n - 1n\nexport const maxUint112 = 2n ** 112n - 1n\nexport const maxUint120 = 2n ** 120n - 1n\nexport const maxUint128 = 2n ** 128n - 1n\nexport const maxUint136 = 2n ** 136n - 1n\nexport const maxUint144 = 2n ** 144n - 1n\nexport const maxUint152 = 2n ** 152n - 1n\nexport const maxUint160 = 2n ** 160n - 1n\nexport const maxUint168 = 2n ** 168n - 1n\nexport const maxUint176 = 2n ** 176n - 1n\nexport const maxUint184 = 2n ** 184n - 1n\nexport const maxUint192 = 2n ** 192n - 1n\nexport const maxUint200 = 2n ** 200n - 1n\nexport const maxUint208 = 2n ** 208n - 1n\nexport const maxUint216 = 2n ** 216n - 1n\nexport const maxUint224 = 2n ** 224n - 1n\nexport const maxUint232 = 2n ** 232n - 1n\nexport const maxUint240 = 2n ** 240n - 1n\nexport const maxUint248 = 2n ** 248n - 1n\nexport const maxUint256 = 2n ** 256n - 1n\n","import type * as Address from './Address.js'\nimport { LruMap } from './internal/lru.js'\n\nconst caches = {\n  checksum: /*#__PURE__*/ new LruMap<Address.Address>(8192),\n}\n\nexport const checksum = caches.checksum\n\n/**\n * Clears all global caches.\n *\n * @example\n * ```ts\n * import { Caches } from 'ox'\n * Caches.clear()\n * ```\n */\nexport function clear() {\n  for (const cache of Object.values(caches)) cache.clear()\n}\n","/**\n * @internal\n *\n * Map with a LRU (Least recently used) policy.\n * @see https://en.wikipedia.org/wiki/Cache_replacement_policies#LRU\n */\nexport class LruMap<value = unknown> extends Map<string, value> {\n  maxSize: number\n\n  constructor(size: number) {\n    super()\n    this.maxSize = size\n  }\n\n  override get(key: string) {\n    const value = super.get(key)\n\n    if (super.has(key) && value !== undefined) {\n      this.delete(key)\n      super.set(key, value)\n    }\n\n    return value\n  }\n\n  override set(key: string, value: value) {\n    super.set(key, value)\n    if (this.maxSize && this.size > this.maxSize) {\n      const firstKey = this.keys().next().value\n      if (firstKey) this.delete(firstKey)\n    }\n    return this\n  }\n}\n","import { ripemd160 as noble_ripemd160 } from '@noble/hashes/ripemd160'\nimport { keccak_256 as noble_keccak256 } from '@noble/hashes/sha3'\nimport { sha256 as noble_sha256 } from '@noble/hashes/sha256'\nimport * as Bytes from './Bytes.js'\nimport type * as Errors from './Errors.js'\nimport * as Hex from './Hex.js'\n\n/**\n * Calculates the [Keccak256](https://en.wikipedia.org/wiki/SHA-3) hash of a {@link ox#Bytes.Bytes} or {@link ox#Hex.Hex} value.\n *\n * This function is a re-export of `keccak_256` from [`@noble/hashes`](https://github.com/paulmillr/noble-hashes), an audited & minimal JS hashing library.\n *\n * @example\n * ```ts twoslash\n * import { Hash } from 'ox'\n *\n * Hash.keccak256('0xdeadbeef')\n * // @log: '0xd4fd4e189132273036449fc9e11198c739161b4c0116a9a2dccdfa1c492006f1'\n * ```\n *\n * @example\n * ### Calculate Hash of a String\n *\n * ```ts twoslash\n * import { Hash, Hex } from 'ox'\n *\n * Hash.keccak256(Hex.fromString('hello world'))\n * // @log: '0x3ea2f1d0abf3fc66cf29eebb70cbd4e7fe762ef8a09bcc06c8edf641230afec0'\n * ```\n *\n * @example\n * ### Configure Return Type\n *\n * ```ts twoslash\n * import { Hash } from 'ox'\n *\n * Hash.keccak256('0xdeadbeef', { as: 'Bytes' })\n * // @log: Uint8Array [...]\n * ```\n *\n * @param value - {@link ox#Bytes.Bytes} or {@link ox#Hex.Hex} value.\n * @param options - Options.\n * @returns Keccak256 hash.\n */\nexport function keccak256<\n  value extends Hex.Hex | Bytes.Bytes,\n  as extends 'Hex' | 'Bytes' =\n    | (value extends Hex.Hex ? 'Hex' : never)\n    | (value extends Bytes.Bytes ? 'Bytes' : never),\n>(\n  value: value | Hex.Hex | Bytes.Bytes,\n  options: keccak256.Options<as> = {},\n): keccak256.ReturnType<as> {\n  const { as = typeof value === 'string' ? 'Hex' : 'Bytes' } = options\n  const bytes = noble_keccak256(Bytes.from(value))\n  if (as === 'Bytes') return bytes as never\n  return Hex.fromBytes(bytes) as never\n}\n\nexport declare namespace keccak256 {\n  type Options<as extends 'Hex' | 'Bytes' = 'Hex' | 'Bytes'> = {\n    /** The return type. @default 'Hex' */\n    as?: as | 'Hex' | 'Bytes' | undefined\n  }\n\n  type ReturnType<as extends 'Hex' | 'Bytes' = 'Hex' | 'Bytes'> =\n    | (as extends 'Bytes' ? Bytes.Bytes : never)\n    | (as extends 'Hex' ? Hex.Hex : never)\n\n  type ErrorType =\n    | Bytes.from.ErrorType\n    | Hex.fromBytes.ErrorType\n    | Errors.GlobalErrorType\n}\n\n/**\n * Calculates the [Ripemd160](https://en.wikipedia.org/wiki/RIPEMD) hash of a {@link ox#Bytes.Bytes} or {@link ox#Hex.Hex} value.\n *\n * This function is a re-export of `ripemd160` from [`@noble/hashes`](https://github.com/paulmillr/noble-hashes), an audited & minimal JS hashing library.\n *\n * @example\n * ```ts twoslash\n * import { Hash } from 'ox'\n *\n * Hash.ripemd160('0xdeadbeef')\n * // '0x226821c2f5423e11fe9af68bd285c249db2e4b5a'\n * ```\n *\n * @param value - {@link ox#Bytes.Bytes} or {@link ox#Hex.Hex} value.\n * @param options - Options.\n * @returns Ripemd160 hash.\n */\nexport function ripemd160<\n  value extends Hex.Hex | Bytes.Bytes,\n  as extends 'Hex' | 'Bytes' =\n    | (value extends Hex.Hex ? 'Hex' : never)\n    | (value extends Bytes.Bytes ? 'Bytes' : never),\n>(\n  value: value | Hex.Hex | Bytes.Bytes,\n  options: ripemd160.Options<as> = {},\n): ripemd160.ReturnType<as> {\n  const { as = typeof value === 'string' ? 'Hex' : 'Bytes' } = options\n  const bytes = noble_ripemd160(Bytes.from(value))\n  if (as === 'Bytes') return bytes as never\n  return Hex.fromBytes(bytes) as never\n}\n\nexport declare namespace ripemd160 {\n  type Options<as extends 'Hex' | 'Bytes' = 'Hex' | 'Bytes'> = {\n    /** The return type. @default 'Hex' */\n    as?: as | 'Hex' | 'Bytes' | undefined\n  }\n\n  type ReturnType<as extends 'Hex' | 'Bytes' = 'Hex' | 'Bytes'> =\n    | (as extends 'Bytes' ? Bytes.Bytes : never)\n    | (as extends 'Hex' ? Hex.Hex : never)\n\n  type ErrorType =\n    | Bytes.from.ErrorType\n    | Hex.fromBytes.ErrorType\n    | Errors.GlobalErrorType\n}\n\n/**\n * Calculates the [Sha256](https://en.wikipedia.org/wiki/SHA-256) hash of a {@link ox#Bytes.Bytes} or {@link ox#Hex.Hex} value.\n *\n * This function is a re-export of `sha256` from [`@noble/hashes`](https://github.com/paulmillr/noble-hashes), an audited & minimal JS hashing library.\n *\n * @example\n * ```ts twoslash\n * import { Hash } from 'ox'\n *\n * Hash.sha256('0xdeadbeef')\n * // '0x5f78c33274e43fa9de5659265c1d917e25c03722dcb0b8d27db8d5feaa813953'\n * ```\n *\n * @param value - {@link ox#Bytes.Bytes} or {@link ox#Hex.Hex} value.\n * @param options - Options.\n * @returns Sha256 hash.\n */\nexport function sha256<\n  value extends Hex.Hex | Bytes.Bytes,\n  as extends 'Hex' | 'Bytes' =\n    | (value extends Hex.Hex ? 'Hex' : never)\n    | (value extends Bytes.Bytes ? 'Bytes' : never),\n>(\n  value: value | Hex.Hex | Bytes.Bytes,\n  options: sha256.Options<as> = {},\n): sha256.ReturnType<as> {\n  const { as = typeof value === 'string' ? 'Hex' : 'Bytes' } = options\n  const bytes = noble_sha256(Bytes.from(value))\n  if (as === 'Bytes') return bytes as never\n  return Hex.fromBytes(bytes) as never\n}\n\nexport declare namespace sha256 {\n  type Options<as extends 'Hex' | 'Bytes' = 'Hex'> = {\n    /** The return type. @default 'Hex' */\n    as?: as | 'Hex' | 'Bytes' | undefined\n  }\n\n  type ReturnType<as extends 'Hex' | 'Bytes' = 'Hex'> =\n    | (as extends 'Bytes' ? Bytes.Bytes : never)\n    | (as extends 'Hex' ? Hex.Hex : never)\n\n  type ErrorType =\n    | Bytes.from.ErrorType\n    | Hex.fromBytes.ErrorType\n    | Errors.GlobalErrorType\n}\n\n/**\n * Checks if a string is a valid hash value.\n *\n * @example\n * ```ts twoslash\n * import { Hash } from 'ox'\n *\n * Hash.validate('0x')\n * // @log: false\n *\n * Hash.validate('0x3ea2f1d0abf3fc66cf29eebb70cbd4e7fe762ef8a09bcc06c8edf641230afec0')\n * // @log: true\n * ```\n *\n * @param value - Value to check.\n * @returns Whether the value is a valid hash.\n */\nexport function validate(value: string): value is Hex.Hex {\n  return Hex.validate(value) && Hex.size(value) === 32\n}\n\nexport declare namespace validate {\n  type ErrorType =\n    | Hex.validate.ErrorType\n    | Hex.size.ErrorType\n    | Errors.GlobalErrorType\n}\n","import type { Address as abitype_Address } from 'abitype'\nimport * as Bytes from './Bytes.js'\nimport * as Caches from './Caches.js'\nimport * as Errors from './Errors.js'\nimport * as Hash from './Hash.js'\nimport * as PublicKey from './PublicKey.js'\n\nconst addressRegex = /*#__PURE__*/ /^0x[a-fA-F0-9]{40}$/\n\n/** Root type for Address. */\nexport type Address = abitype_Address\n\n/**\n * Asserts that the given value is a valid {@link ox#Address.Address}.\n *\n * @example\n * ```ts twoslash\n * import { Address } from 'ox'\n *\n * Address.assert('0xA0Cf798816D4b9b9866b5330EEa46a18382f251e')\n * ```\n *\n * @example\n * ```ts twoslash\n * import { Address } from 'ox'\n *\n * Address.assert('0xdeadbeef')\n * // @error: InvalidAddressError: Address \"0xdeadbeef\" is invalid.\n * ```\n *\n * @param value - Value to assert if it is a valid address.\n * @param options - Assertion options.\n */\nexport function assert(\n  value: string,\n  options: assert.Options = {},\n): asserts value is Address {\n  const { strict = true } = options\n\n  if (!addressRegex.test(value))\n    throw new InvalidAddressError({\n      address: value,\n      cause: new InvalidInputError(),\n    })\n\n  if (strict) {\n    if (value.toLowerCase() === value) return\n    if (checksum(value as Address) !== value)\n      throw new InvalidAddressError({\n        address: value,\n        cause: new InvalidChecksumError(),\n      })\n  }\n}\n\nexport declare namespace assert {\n  type Options = {\n    /**\n     * Enables strict mode. Whether or not to compare the address against its checksum.\n     *\n     * @default true\n     */\n    strict?: boolean | undefined\n  }\n\n  type ErrorType = InvalidAddressError | Errors.GlobalErrorType\n}\n\n/**\n * Computes the checksum address for the given {@link ox#Address.Address}.\n *\n * @example\n * ```ts twoslash\n * import { Address } from 'ox'\n *\n * Address.checksum('0xa0cf798816d4b9b9866b5330eea46a18382f251e')\n * // @log: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e'\n * ```\n *\n * @param address - The address to compute the checksum for.\n * @returns The checksummed address.\n */\nexport function checksum(address: string): Address {\n  if (Caches.checksum.has(address)) return Caches.checksum.get(address)!\n\n  assert(address, { strict: false })\n\n  const hexAddress = address.substring(2).toLowerCase()\n  const hash = Hash.keccak256(Bytes.fromString(hexAddress), { as: 'Bytes' })\n\n  const characters = hexAddress.split('')\n  for (let i = 0; i < 40; i += 2) {\n    if (hash[i >> 1]! >> 4 >= 8 && characters[i]) {\n      characters[i] = characters[i]!.toUpperCase()\n    }\n    if ((hash[i >> 1]! & 0x0f) >= 8 && characters[i + 1]) {\n      characters[i + 1] = characters[i + 1]!.toUpperCase()\n    }\n  }\n\n  const result = `0x${characters.join('')}` as const\n  Caches.checksum.set(address, result)\n  return result\n}\n\nexport declare namespace checksum {\n  type ErrorType =\n    | assert.ErrorType\n    | Hash.keccak256.ErrorType\n    | Bytes.fromString.ErrorType\n    | Errors.GlobalErrorType\n}\n\n/**\n * Converts a stringified address to a typed (checksummed) {@link ox#Address.Address}.\n *\n * @example\n * ```ts twoslash\n * import { Address } from 'ox'\n *\n * Address.from('0xa0cf798816d4b9b9866b5330eea46a18382f251e')\n * // @log: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e'\n * ```\n *\n * @example\n * ```ts twoslash\n * import { Address } from 'ox'\n *\n * Address.from('0xa0cf798816d4b9b9866b5330eea46a18382f251e', {\n *   checksum: false\n * })\n * // @log: '0xa0cf798816d4b9b9866b5330eea46a18382f251e'\n * ```\n *\n * @example\n * ```ts twoslash\n * import { Address } from 'ox'\n *\n * Address.from('hello')\n * // @error: InvalidAddressError: Address \"0xa\" is invalid.\n * ```\n *\n * @param address - An address string to convert to a typed Address.\n * @param options - Conversion options.\n * @returns The typed Address.\n */\nexport function from(address: string, options: from.Options = {}): Address {\n  const { checksum: checksumVal = false } = options\n  assert(address)\n  if (checksumVal) return checksum(address)\n  return address as Address\n}\n\nexport declare namespace from {\n  type Options = {\n    /**\n     * Whether to checksum the address.\n     *\n     * @default false\n     */\n    checksum?: boolean | undefined\n  }\n\n  type ErrorType =\n    | assert.ErrorType\n    | checksum.ErrorType\n    | Errors.GlobalErrorType\n}\n\n/**\n * Converts an ECDSA public key to an {@link ox#Address.Address}.\n *\n * @example\n * ```ts twoslash\n * import { Address, PublicKey } from 'ox'\n *\n * const publicKey = PublicKey.from(\n *   '0x048318535b54105d4a7aae60c08fc45f9687181b4fdfc625bd1a753fa7397fed753547f11ca8696646f2f3acb08e31016afac23e630c5d11f59f61fef57b0d2aa5',\n * )\n * const address = Address.fromPublicKey(publicKey)\n * // @log: '0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266'\n * ```\n *\n * @param publicKey - The ECDSA public key to convert to an {@link ox#Address.Address}.\n * @param options - Conversion options.\n * @returns The {@link ox#Address.Address} corresponding to the public key.\n */\nexport function fromPublicKey(\n  publicKey: PublicKey.PublicKey,\n  options: fromPublicKey.Options = {},\n): Address {\n  const address = Hash.keccak256(\n    `0x${PublicKey.toHex(publicKey).slice(4)}`,\n  ).substring(26)\n  return from(`0x${address}`, options)\n}\n\nexport declare namespace fromPublicKey {\n  type Options = {\n    /**\n     * Whether to checksum the address.\n     *\n     * @default false\n     */\n    checksum?: boolean | undefined\n  }\n\n  type ErrorType =\n    | Hash.keccak256.ErrorType\n    | PublicKey.toHex.ErrorType\n    | Errors.GlobalErrorType\n}\n\n/**\n * Checks if two {@link ox#Address.Address} are equal.\n *\n * @example\n * ```ts twoslash\n * import { Address } from 'ox'\n *\n * Address.isEqual(\n *   '0xa0cf798816d4b9b9866b5330eea46a18382f251e',\n *   '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e'\n * )\n * // @log: true\n * ```\n *\n * @example\n * ```ts twoslash\n * import { Address } from 'ox'\n *\n * Address.isEqual(\n *   '0xa0cf798816d4b9b9866b5330eea46a18382f251e',\n *   '0xA0Cf798816D4b9b9866b5330EEa46a18382f251f'\n * )\n * // @log: false\n * ```\n *\n * @param addressA - The first address to compare.\n * @param addressB - The second address to compare.\n * @returns Whether the addresses are equal.\n */\nexport function isEqual(addressA: Address, addressB: Address): boolean {\n  assert(addressA, { strict: false })\n  assert(addressB, { strict: false })\n  return addressA.toLowerCase() === addressB.toLowerCase()\n}\n\nexport declare namespace isEqual {\n  type ErrorType = assert.ErrorType | Errors.GlobalErrorType\n}\n\n/**\n * Checks if the given address is a valid {@link ox#Address.Address}.\n *\n * @example\n * ```ts twoslash\n * import { Address } from 'ox'\n *\n * Address.validate('0xA0Cf798816D4b9b9866b5330EEa46a18382f251e')\n * // @log: true\n * ```\n *\n * @example\n * ```ts twoslash\n * import { Address } from 'ox'\n *\n * Address.validate('0xdeadbeef')\n * // @log: false\n * ```\n *\n * @param address - Value to check if it is a valid address.\n * @param options - Check options.\n * @returns Whether the address is a valid address.\n */\nexport function validate(\n  address: string,\n  options: validate.Options = {},\n): address is Address {\n  const { strict = true } = options ?? {}\n  try {\n    assert(address, { strict })\n    return true\n  } catch {\n    return false\n  }\n}\n\nexport declare namespace validate {\n  type Options = {\n    /**\n     * Enables strict mode. Whether or not to compare the address against its checksum.\n     *\n     * @default true\n     */\n    strict?: boolean | undefined\n  }\n}\n\n/**\n * Thrown when an address is invalid.\n *\n * @example\n * ```ts twoslash\n * import { Address } from 'ox'\n *\n * Address.from('0x123')\n * // @error: Address.InvalidAddressError: Address `0x123` is invalid.\n * ```\n */\nexport class InvalidAddressError<\n  cause extends InvalidInputError | InvalidChecksumError =\n    | InvalidInputError\n    | InvalidChecksumError,\n> extends Errors.BaseError<cause> {\n  override readonly name = 'Address.InvalidAddressError'\n\n  constructor({ address, cause }: { address: string; cause: cause }) {\n    super(`Address \"${address}\" is invalid.`, {\n      cause,\n    })\n  }\n}\n\n/** Thrown when an address is not a 20 byte (40 hexadecimal character) value. */\nexport class InvalidInputError extends Errors.BaseError {\n  override readonly name = 'Address.InvalidInputError'\n\n  constructor() {\n    super('Address is not a 20 byte (40 hexadecimal character) value.')\n  }\n}\n\n/** Thrown when an address does not match its checksum counterpart. */\nexport class InvalidChecksumError extends Errors.BaseError {\n  override readonly name = 'Address.InvalidChecksumError'\n\n  constructor() {\n    super('Address does not match its checksum counterpart.')\n  }\n}\n","import type { ProviderInterface } from \"@coinbase/wallet-sdk\";\n\nexport async function showCoinbasePopup(provider: ProviderInterface) {\n  // biome-ignore lint/suspicious/noExplicitAny: based on the latest CB SDK - scary but works\n  await (provider as any)?.communicator?.waitForPopupLoaded?.();\n}\n","import type { Abi, AbiFunction } from \"abitype\";\nimport type { WalletSendCallsParameters as ViemWalletSendCallsParameters } from \"viem\";\nimport type { Chain } from \"../../chains/types.js\";\nimport type { ThirdwebClient } from \"../../client/client.js\";\nimport { encode } from \"../../transaction/actions/encode.js\";\nimport type { PreparedTransaction } from \"../../transaction/prepare-transaction.js\";\nimport { getAddress } from \"../../utils/address.js\";\nimport { type Hex, numberToHex } from \"../../utils/encoding/hex.js\";\nimport {\n  type PromisedObject,\n  resolvePromisedValue,\n} from \"../../utils/promise/resolve-promised-value.js\";\nimport type { OneOf, Prettify } from \"../../utils/type-utils.js\";\nimport type { Account, Wallet } from \"../interfaces/wallet.js\";\nimport type { WalletId } from \"../wallet-types.js\";\nimport type {\n  EIP5792Call,\n  WalletSendCallsId,\n  WalletSendCallsParameters,\n} from \"./types.js\";\n\ntype WalletCall = OneOf<{\n  to?: string | undefined; // TODO: Make this required but compatible with StaticPrepareTransactionOptions to prevent runtime error\n  data?: Hex | undefined;\n  value?: bigint | undefined;\n}>;\n\nexport type PreparedSendCall<\n  abi extends Abi = [],\n  abiFunction extends AbiFunction = AbiFunction,\n> = PreparedTransaction<abi, abiFunction, PrepareCallOptions>;\n\nexport type PrepareCallOptions = {\n  chain: Chain;\n  client: ThirdwebClient;\n} & PromisedObject<WalletCall>;\n\nexport type SendCallsOptions<\n  ID extends WalletId = WalletId,\n  abi extends Abi = [],\n  abiFunction extends AbiFunction = AbiFunction,\n> = Prettify<{\n  wallet: Wallet<ID>;\n  calls: PreparedSendCall<abi, abiFunction>[];\n  capabilities?: WalletSendCallsParameters[number][\"capabilities\"];\n  version?: WalletSendCallsParameters[number][\"version\"];\n  chain?: Chain;\n  atomicRequired?: boolean;\n}>;\n\nexport type SendCallsResult = Prettify<{\n  id: WalletSendCallsId;\n  client: ThirdwebClient;\n  chain: Chain;\n  wallet: Wallet;\n}>;\n\n/**\n * Send [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) calls to a wallet.\n * This function works with all Thirdweb wallets (in-app and smart) and certain injected wallets that already support EIP-5792.\n * Transactions will be bundled and sponsored when those capabilities are supported, otherwise they will be sent as individual transactions.\n *\n *  This function is dependent on the wallet's support for EIP-5792 and could fail.\n *\n * @param {SendCallsOptions} options\n * @param {Wallet} options.wallet - The wallet to send the calls to.\n * @param {PreparedSendCall[]} options.calls - An array of prepared transactions to send.\n * @param {WalletSendCallsParameters[number][\"capabilities\"]} [options.capabilities] - Capabilities objects to use, see the [EIP-5792 spec](https://eips.ethereum.org/EIPS/eip-5792) for details.\n * @param {string} [options.version=\"1.0\"] - The `wallet_sendCalls` version to use, defaults to \"1.0\".\n * @param {Chain} [options.chain] - A {@link Chain} instance to override the wallet's current chain.\n * @throws an error if the wallet does not support EIP-5792.\n * @returns The ID of the bundle of the calls.\n *\n * @see getCallsStatus for how to retrieve the status of the bundle.\n * @see getCapabilities for how to retrieve the capabilities of the wallet.\n * @beta\n * @example\n * ```ts\n * import { createThirdwebClient } from \"thirdweb\";\n * import { sendCalls } from \"thirdweb/wallets/eip5792\";\n *\n * const client = createThirdwebClient({ clientId: ... });\n * const wallet = createWallet(\"com.coinbase.wallet\");\n * await wallet.connect({ client });\n *\n * const sendTx1 = approve({\n      contract: USDT_CONTRACT,\n      amount: 100,\n      spender: \"0x33d9B8BEfE81027E2C859EDc84F5636cbb202Ed6\",\n    });\n * const sendTx2 = approve({\n      contract: USDT_CONTRACT,\n      amount: 100,\n      spender: \"0x2a4f24F935Eb178e3e7BA9B53A5Ee6d8407C0709\",\n    });\n * const bundleId = await sendCalls({\n *   wallet,\n *   client,\n *   calls: [sendTx1, sendTx2],\n * });\n * ```\n * Sponsor transactions with a paymaster:\n * ```ts\n * const bundleId = await sendCalls({\n *   wallet,\n *   client,\n *   calls: [send1, send2],\n *   capabilities: {\n *     paymasterService: {\n *       url: `https://${CHAIN.id}.bundler.thirdweb.com/${client.clientId}`\n *     }\n *   }\n * });\n * ```\n * We recommend proxying any paymaster calls via an API route you setup and control.\n *\n * @extension EIP5792\n */\nexport async function sendCalls<const ID extends WalletId>(\n  options: SendCallsOptions<ID>,\n): Promise<SendCallsResult> {\n  const { wallet, chain } = options;\n\n  const account = wallet.getAccount();\n  if (!account) {\n    throw new Error(\n      `Cannot send calls, no account connected for wallet: ${wallet.id}`,\n    );\n  }\n\n  const firstCall = options.calls[0];\n  if (!firstCall) {\n    throw new Error(\"No calls to send\");\n  }\n\n  const callChain = firstCall.chain || chain;\n\n  if (wallet.getChain()?.id !== callChain.id) {\n    await wallet.switchChain(callChain);\n  }\n\n  // check internal implementations\n  if (account.sendCalls) {\n    const { wallet: _, ...optionsWithoutWallet } = options;\n    const result = await account.sendCalls(optionsWithoutWallet);\n    return {\n      ...result,\n      wallet,\n    };\n  }\n\n  throw new Error(\n    `Cannot send calls, wallet ${wallet.id} does not support EIP-5792`,\n  );\n}\n\nexport async function toProviderCallParams(\n  options: Omit<SendCallsOptions, \"wallet\">,\n  account: Account,\n): Promise<{ callParams: ViemWalletSendCallsParameters; chain: Chain }> {\n  const firstCall = options.calls[0];\n  if (!firstCall) {\n    throw new Error(\"No calls to send\");\n  }\n\n  const {\n    calls,\n    capabilities,\n    version = \"2.0.0\",\n    chain = firstCall.chain,\n  } = options;\n\n  const preparedCalls: EIP5792Call[] = await Promise.all(\n    calls.map(async (call) => {\n      const { to, value } = call;\n      if (to === undefined && call.data === undefined) {\n        throw new Error(\"Cannot send call, `to` or `data` must be provided.\");\n      }\n\n      const [_to, _data, _value] = await Promise.all([\n        resolvePromisedValue(to),\n        encode(call),\n        resolvePromisedValue(value),\n      ]);\n\n      if (_to) {\n        return {\n          data: _data as Hex,\n          to: getAddress(_to),\n          value:\n            typeof _value === \"bigint\" || typeof _value === \"number\"\n              ? numberToHex(_value)\n              : undefined,\n        };\n      }\n\n      return {\n        data: _data as Hex,\n        to: undefined,\n        value: undefined,\n      };\n    }),\n  );\n\n  const injectedWalletCallParams: ViemWalletSendCallsParameters = [\n    {\n      // see: https://eips.ethereum.org/EIPS/eip-5792#wallet_sendcalls\n      atomicRequired: options.atomicRequired ?? false,\n      calls: preparedCalls,\n      capabilities,\n      chainId: numberToHex(chain.id),\n      from: getAddress(account.address),\n      version,\n    },\n  ];\n\n  return { callParams: injectedWalletCallParams, chain };\n}\n"],"names":[],"mappings":"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","ignoreList":[1,2,3,7,8]}