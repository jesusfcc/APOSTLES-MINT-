{"version":3,"sources":["../../../../node_modules/thirdweb/src/auth/core/create-login-message.ts","../../../../node_modules/thirdweb/src/auth/core/sign-login-payload.ts"],"sourcesContent":["import type { LoginPayload } from \"./types.js\";\n\n/**\n * Create an EIP-4361 & CAIP-122 compliant message to sign based on the login payload\n * @param payload - The login payload containing the necessary information.\n * @returns The generated login message.\n * @internal\n */\nexport function createLoginMessage(payload: LoginPayload): string {\n  const typeField = \"Ethereum\";\n  const header = `${payload.domain} wants you to sign in with your ${typeField} account:`;\n  let prefix = [header, payload.address].join(\"\\n\");\n  prefix = [prefix, payload.statement].join(\"\\n\\n\");\n  if (payload.statement) {\n    prefix += \"\\n\";\n  }\n\n  const suffixArray = [];\n  if (payload.uri) {\n    const uriField = `URI: ${payload.uri}`;\n    suffixArray.push(uriField);\n  }\n\n  const versionField = `Version: ${payload.version}`;\n  suffixArray.push(versionField);\n\n  if (payload.chain_id) {\n    const chainField = `Chain ID: ${payload.chain_id}` || \"1\";\n    suffixArray.push(chainField);\n  }\n\n  const nonceField = `Nonce: ${payload.nonce}`;\n  suffixArray.push(nonceField);\n\n  const issuedAtField = `Issued At: ${payload.issued_at}`;\n  suffixArray.push(issuedAtField);\n\n  const expiryField = `Expiration Time: ${payload.expiration_time}`;\n  suffixArray.push(expiryField);\n\n  if (payload.invalid_before) {\n    const invalidBeforeField = `Not Before: ${payload.invalid_before}`;\n    suffixArray.push(invalidBeforeField);\n  }\n\n  if (payload.resources) {\n    suffixArray.push(\n      [\"Resources:\", ...payload.resources.map((x) => `- ${x}`)].join(\"\\n\"),\n    );\n  }\n\n  const suffix = suffixArray.join(\"\\n\");\n  return [prefix, suffix].join(\"\\n\");\n}\n","import type { Account } from \"../../wallets/interfaces/wallet.js\";\nimport { createLoginMessage } from \"./create-login-message.js\";\nimport type { LoginPayload } from \"./types.js\";\n\n/**\n * @auth\n */\nexport type SignLoginPayloadParams = {\n  payload: LoginPayload;\n  account: Account;\n};\n\n/**\n * Signs the login payload using the provided account.\n * @param options - The options for signing the login payload.\n * @returns An object containing the signature and the payload.\n * @example\n * ```ts\n * import { signLoginPayload } from 'thirdweb/auth';\n *\n * const { signature, payload } = await signLoginPayload({\n *  payload: loginPayload,\n *  account: account,\n * });\n * ```\n * @auth\n */\nexport async function signLoginPayload(options: SignLoginPayloadParams) {\n  const { payload, account } = options;\n  const signature = await account.signMessage({\n    message: createLoginMessage(payload),\n  });\n  return {\n    payload,\n    signature,\n  };\n}\n"],"names":[],"mappings":"wCC2BO,eAAe,EAAiB,CDRH,ACQkC,CDR3B,CCSzC,GAAM,SAAE,CAAO,SAAE,CAAO,CAAE,CAAG,CDRD,CCStB,ADTuB,ECSX,GADkB,CAAC,EACb,CAAT,CAAiB,KAAD,MAAY,CAAC,CAC1C,QDtBE,ACsBO,KDPO,IAfe,AAAnB,CAAwC,EAEtD,IACI,EAAS,AADP,CAAS,GACL,AADQ,EAAN,AAAc,GAFM,EAEP,CAAO,CAAA,gCAAA,EAAmC,SAAS,CAAA,MAAW,CAAC,AAClE,EADsD,AAC9C,KAAD,EAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,AAClD,EAAS,CAAC,EAAQ,CAAZ,CAAoB,EAAV,GAAS,IAAU,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,AAC9C,EAAQ,KAAD,IAAU,EAAE,CAAC,AACtB,GAAU,GAAJ,CAAI,CAAI,CAAC,AAGjB,IAAM,EAAc,EAAE,CAAC,AACvB,GAAI,EAAQ,CADK,EACF,CAAE,CAAN,AAAO,AAChB,ICQQ,ADRF,EAAW,CAAA,KAAA,EAAQ,EAAQ,GCQC,ADRE,CAAA,CAAA,CACpC,EAAY,IAAI,CAAC,EACnB,CAAC,AAED,IAAM,EAAe,CAAA,ECOZ,ODPY,EAAY,EAAQ,ICOJ,CAAC,ADPE,EAAQ,CAAA,CAAE,CAAC,KACvC,IAAI,CAAC,GAEb,EAAQ,OAFiB,CAAC,AAEV,CAFW,AAET,CAAC,IACf,CCMC,CDNY,CAAA,OAAH,GAAG,EAAa,EAAQ,KAAD,GAAS,CAAA,CAAE,EAAI,GAAG,CAAC,EAC9C,IAAI,CAAC,GAGnB,IAAM,EAAa,CAAA,AAHU,CAAC,CAAC,KAGZ,AAAH,EAAa,EAAQ,KAAD,AAAM,CAAA,CAAE,CAAC,AAC7C,EAAY,IAAI,CAAC,GAEjB,CAFW,GAEL,EAAgB,CAFK,AAEL,CAFM,CAAC,QAEV,CAAG,EAAc,EAAQ,KAAD,IAAU,CAAA,CAAE,CAAC,AACxD,EAAY,IAAI,CAAC,GAEjB,CAFW,GAEL,EAAc,CAAA,GAFU,CAAC,CAAC,GAEf,SAAG,EAAoB,EAAQ,KAAD,UAAgB,CAAA,CAAE,CAAC,AAGlE,GAFA,EAAY,IAAI,CAAC,GAEb,CAFO,CAEC,KAAD,CAFiB,CAAC,CAAC,MAEJ,CAAE,CAAC,AAC3B,IAAM,EAAqB,CAAA,YAAA,EAAe,CAAlB,CAA0B,KAAD,SAAe,CAAA,CAAE,CAAC,AACnE,EAAY,IAAI,CAAC,EACnB,CASA,AATC,CADY,MAGT,EAAQ,KAAD,CAH0B,CAAC,CAAC,CAGlB,EAAE,AACrB,CADsB,CACV,IAAI,CACd,CAAC,GADQ,SACI,EAAE,EAAG,EAAQ,KAAD,IAAU,CAAC,GAAG,CAAE,AAAD,CAAE,EAAE,AAAG,CAAA,EAAA,EAAK,CAAC,CAAA,CAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CACrE,CAAC,AAIG,CAAC,EADO,EAAY,EACb,EADiB,CAAC,IAAN,AAAU,CAAC,CACd,AADe,CACd,IAAI,CAAC,IAAI,CACnC,AADoC,CACnC,AADoC,CCtBL,KAE9B,MAAO,IDNI,KCOT,YACA,EAEJ,CAAC,MAFY,EDNE","ignoreList":[0,1]}