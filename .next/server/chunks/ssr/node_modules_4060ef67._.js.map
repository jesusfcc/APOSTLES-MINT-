{"version":3,"sources":["../../../../node_modules/mipd/src/store.ts","../../../../node_modules/mipd/src/utils.ts","../../../../node_modules/thirdweb/src/wallets/coinbase/coinbase-wallet.ts","../../../../node_modules/thirdweb/src/utils/web/openWindow.ts","../../../../node_modules/thirdweb/src/utils/web/isMobile.ts","../../../../node_modules/thirdweb/src/wallets/in-app/web/ecosystem.ts","../../../../node_modules/thirdweb/src/wallets/in-app/web/in-app.ts","../../../../node_modules/thirdweb/src/wallets/injected/index.ts","../../../../node_modules/thirdweb/src/wallets/create-wallet.ts","../../../../node_modules/thirdweb/src/wallets/injected/mipdStore.ts"],"sourcesContent":["import type { Rdns } from './register.js'\nimport type { EIP6963ProviderDetail } from './types.js'\nimport { requestProviders } from './utils.js'\n\nexport type Listener = (\n  providerDetails: readonly EIP6963ProviderDetail[],\n  meta?:\n    | {\n        added?: readonly EIP6963ProviderDetail[] | undefined\n        removed?: readonly EIP6963ProviderDetail[] | undefined\n      }\n    | undefined,\n) => void\n\nexport type Store = {\n  /**\n   * Clears the store, including all provider details.\n   */\n  clear(): void\n  /**\n   * Destroys the store, including all provider details and listeners.\n   */\n  destroy(): void\n  /**\n   * Finds a provider detail by its RDNS (Reverse Domain Name Identifier).\n   */\n  findProvider(args: { rdns: Rdns }): EIP6963ProviderDetail | undefined\n  /**\n   * Returns all provider details that have been emitted.\n   */\n  getProviders(): readonly EIP6963ProviderDetail[]\n  /**\n   * Resets the store, and emits an event to request provider details.\n   */\n  reset(): void\n  /**\n   * Subscribes to emitted provider details.\n   */\n  subscribe(\n    listener: Listener,\n    args?: { emitImmediately?: boolean | undefined } | undefined,\n  ): () => void\n\n  /**\n   * @internal\n   * Current state of listening listeners.\n   */\n  _listeners(): Set<Listener>\n}\n\nexport function createStore(): Store {\n  const listeners: Set<Listener> = new Set()\n  let providerDetails: readonly EIP6963ProviderDetail[] = []\n\n  const request = () =>\n    requestProviders((providerDetail) => {\n      if (\n        providerDetails.some(\n          ({ info }) => info.uuid === providerDetail.info.uuid,\n        )\n      )\n        return\n\n      providerDetails = [...providerDetails, providerDetail]\n      listeners.forEach((listener) =>\n        listener(providerDetails, { added: [providerDetail] }),\n      )\n    })\n  let unwatch = request()\n\n  return {\n    _listeners() {\n      return listeners\n    },\n    clear() {\n      listeners.forEach((listener) =>\n        listener([], { removed: [...providerDetails] }),\n      )\n      providerDetails = []\n    },\n    destroy() {\n      this.clear()\n      listeners.clear()\n      unwatch?.()\n    },\n    findProvider({ rdns }) {\n      return providerDetails.find(\n        (providerDetail) => providerDetail.info.rdns === rdns,\n      )\n    },\n    getProviders() {\n      return providerDetails\n    },\n    reset() {\n      this.clear()\n      unwatch?.()\n      unwatch = request()\n    },\n    subscribe(listener, { emitImmediately } = {}) {\n      listeners.add(listener)\n      if (emitImmediately) listener(providerDetails, { added: providerDetails })\n      return () => listeners.delete(listener)\n    },\n  }\n}\n","import type { EIP1193Provider } from './register.js'\nimport type {\n  EIP6963AnnounceProviderEvent,\n  EIP6963ProviderDetail,\n} from './types.js'\n\n////////////////////////////////////////////////////////////////////////////\n// Announce Provider\n\nexport type AnnounceProviderParameters = EIP6963ProviderDetail<\n  EIP1193Provider,\n  string\n>\nexport type AnnounceProviderReturnType = () => void\n\n/**\n * Announces an EIP-1193 Provider.\n */\nexport function announceProvider(\n  detail: AnnounceProviderParameters,\n): AnnounceProviderReturnType {\n  const event: CustomEvent<EIP6963ProviderDetail> = new CustomEvent(\n    'eip6963:announceProvider',\n    { detail: Object.freeze(detail) },\n  )\n\n  window.dispatchEvent(event)\n\n  const handler = () => window.dispatchEvent(event)\n  window.addEventListener('eip6963:requestProvider', handler)\n  return () => window.removeEventListener('eip6963:requestProvider', handler)\n}\n\n////////////////////////////////////////////////////////////////////////////\n// Request Providers\n\nexport type RequestProvidersParameters = (\n  providerDetail: EIP6963ProviderDetail,\n) => void\nexport type RequestProvidersReturnType = (() => void) | undefined\n\n/**\n * Watches for EIP-1193 Providers to be announced.\n */\nexport function requestProviders(\n  listener: RequestProvidersParameters,\n): RequestProvidersReturnType {\n  if (typeof window === 'undefined') return\n  const handler = (event: EIP6963AnnounceProviderEvent) =>\n    listener(event.detail)\n\n  window.addEventListener('eip6963:announceProvider', handler)\n\n  window.dispatchEvent(new CustomEvent('eip6963:requestProvider'))\n\n  return () => window.removeEventListener('eip6963:announceProvider', handler)\n}\n","/**\n * internal helper functions\n */\n\nimport type { ProviderInterface } from \"@coinbase/wallet-sdk\";\nimport { trackConnect } from \"../../analytics/track/connect.js\";\nimport type { Chain } from \"../../chains/types.js\";\nimport { getCachedChainIfExists } from \"../../chains/utils.js\";\nimport { COINBASE } from \"../constants.js\";\nimport type { Account, Wallet } from \"../interfaces/wallet.js\";\nimport { createWalletEmitter } from \"../wallet-emitter.js\";\nimport type { CreateWalletArgs } from \"../wallet-types.js\";\n\n/**\n * @internal\n */\nexport function coinbaseWalletSDK(args: {\n  createOptions?: CreateWalletArgs<typeof COINBASE>[1];\n  providerFactory: () => Promise<ProviderInterface>;\n  onConnectRequested?: (provider: ProviderInterface) => Promise<void>;\n}): Wallet<typeof COINBASE> {\n  const { createOptions } = args;\n  const emitter = createWalletEmitter<typeof COINBASE>();\n  let account: Account | undefined;\n  let chain: Chain | undefined;\n\n  function reset() {\n    account = undefined;\n    chain = undefined;\n  }\n\n  let handleDisconnect = async () => {};\n\n  let handleSwitchChain = async (newChain: Chain) => {\n    chain = newChain;\n  };\n\n  const unsubscribeChainChanged = emitter.subscribe(\n    \"chainChanged\",\n    (newChain) => {\n      chain = newChain;\n    },\n  );\n\n  const unsubscribeDisconnect = emitter.subscribe(\"disconnect\", () => {\n    reset();\n    unsubscribeChainChanged();\n    unsubscribeDisconnect();\n  });\n\n  emitter.subscribe(\"accountChanged\", (_account) => {\n    account = _account;\n  });\n\n  return {\n    autoConnect: async (options) => {\n      const { autoConnectCoinbaseWalletSDK } = await import(\n        \"./coinbase-web.js\"\n      );\n      const provider = await args.providerFactory();\n      const [connectedAccount, connectedChain, doDisconnect, doSwitchChain] =\n        await autoConnectCoinbaseWalletSDK(options, emitter, provider);\n      // set the states\n      account = connectedAccount;\n      chain = connectedChain;\n      handleDisconnect = doDisconnect;\n      handleSwitchChain = doSwitchChain;\n      trackConnect({\n        chainId: chain.id,\n        client: options.client,\n        walletAddress: account.address,\n        walletType: COINBASE,\n      });\n      // return account\n      return account;\n    },\n    connect: async (options) => {\n      const { connectCoinbaseWalletSDK } = await import(\"./coinbase-web.js\");\n      const provider = await args.providerFactory();\n      const [connectedAccount, connectedChain, doDisconnect, doSwitchChain] =\n        await connectCoinbaseWalletSDK(options, emitter, provider);\n\n      // set the states\n      account = connectedAccount;\n      chain = connectedChain;\n      handleDisconnect = doDisconnect;\n      handleSwitchChain = doSwitchChain;\n      trackConnect({\n        chainId: chain.id,\n        client: options.client,\n        walletAddress: account.address,\n        walletType: COINBASE,\n      });\n      // return account\n      return account;\n    },\n    disconnect: async () => {\n      reset();\n      await handleDisconnect();\n    },\n    getAccount: () => account,\n    getChain() {\n      if (!chain) {\n        return undefined;\n      }\n\n      chain = getCachedChainIfExists(chain.id) || chain;\n      return chain;\n    },\n    getConfig: () => createOptions,\n    id: COINBASE,\n    onConnectRequested: async () => {\n      if (args.onConnectRequested) {\n        const provider = await args.providerFactory();\n        return args.onConnectRequested?.(provider);\n      }\n    },\n    subscribe: emitter.subscribe,\n    switchChain: async (newChain) => {\n      await handleSwitchChain(newChain);\n    },\n  };\n}\n","/**\n * @internal\n */\nexport function openWindow(uri: string) {\n  const isInsideIframe = window !== window.top;\n  if (isInsideIframe) {\n    window.open(uri);\n  } else {\n    if (uri.startsWith(\"http\")) {\n      // taken from for https://github.com/rainbow-me/rainbowkit/\n\n      // Using 'window.open' causes issues on iOS in non-Safari browsers and\n      // WebViews where a blank tab is left behind after connecting.\n      // This is especially bad in some WebView scenarios (e.g. following a\n      // link from Twitter) where the user doesn't have any mechanism for\n      // closing the blank tab.\n      // For whatever reason, links with a target of \"_blank\" don't suffer\n      // from this problem, and programmatically clicking a detached link\n      // element with the same attributes also avoids the issue.\n\n      const link = document.createElement(\"a\");\n      link.href = uri;\n      link.target = \"_blank\";\n      link.rel = \"noreferrer noopener\";\n      link.click();\n    } else {\n      window.location.href = uri;\n    }\n  }\n}\n","import { detectOS } from \"../detect-platform.js\";\n\n/**\n * @internal\n */\nfunction isAndroid(): boolean {\n  // can only detect if useragent is defined\n  if (typeof navigator === \"undefined\") {\n    return false;\n  }\n  const os = detectOS(navigator.userAgent);\n  return os ? os.toLowerCase().includes(\"android\") : false;\n}\n\n/**\n * @internal\n */\nfunction isIOS(): boolean {\n  // can only detect if useragent is defined\n  if (typeof navigator === \"undefined\") {\n    return false;\n  }\n  const os = detectOS(navigator.userAgent);\n  return os\n    ? os.toLowerCase().includes(\"ios\") ||\n        (os.toLowerCase().includes(\"mac\") && navigator.maxTouchPoints > 1)\n    : false;\n}\n\n/**\n * @internal\n */\nfunction hasTouchScreen(): boolean {\n  if (typeof window === \"undefined\" || typeof navigator === \"undefined\") {\n    return false;\n  }\n  return (\n    \"ontouchstart\" in window ||\n    navigator.maxTouchPoints > 0 ||\n    // @ts-expect-error - msMaxTouchPoints is IE specific\n    navigator.msMaxTouchPoints > 0\n  );\n}\n\n/**\n * @internal\n */\nfunction hasMobileAPIs(): boolean {\n  if (typeof window === \"undefined\") {\n    return false;\n  }\n  return \"orientation\" in window || \"onorientationchange\" in window;\n}\n\n/**\n * @internal\n */\nexport function isMobile(): boolean {\n  // Primary signal: OS detection via user agent\n\n  const isMobileOS = isAndroid() || isIOS();\n\n  if (isMobileOS) {\n    return true;\n  }\n\n  // Secondary signal: catch edge cases like webviews with modified user agents\n  // Both touch capability AND mobile-specific APIs must be present to avoid\n  // false positives on touch-enabled desktops\n  if (hasTouchScreen() && hasMobileAPIs()) {\n    return true;\n  }\n\n  const isMobileViewport =\n    typeof window !== \"undefined\" && window.innerWidth < 640;\n\n  if (isMobileViewport) {\n    return true;\n  }\n\n  return false;\n}\n","import type { ThirdwebClient } from \"../../../client/client.js\";\nimport type {\n  CreateWalletArgs,\n  EcosystemWalletId,\n} from \"../../wallet-types.js\";\nimport { createInAppWallet } from \"../core/wallet/in-app-core.js\";\nimport type { EcosystemWallet } from \"../core/wallet/types.js\";\n\n/**\n * Creates an [Ecosystem Wallet](https://portal.thirdweb.com/connect/wallet/overview) based on various authentication methods. Full list of available authentication methods [here](/connect/wallet/sign-in-methods/configure).\n *\n * Can also be configured to use Account Abstraction to directly connect to a ERC4337 smart account based on those authentication methods.\n *\n * Refer to [inAppWallet](/typescript/v5/inAppWallet) for detailed usage examples.\n *\n * @param createOptions - configuration options\n * Refer to [EcosystemWalletCreationOptions](https://portal.thirdweb.com/references/typescript/v5/EcosystemWalletCreationOptions) for more details.\n * @returns The created ecosystem wallet.\n *\n *\n * @example\n * ### Logging into an ecosystem wallet\n *\n * Below is the general code snippet needed to connect via a given auth strategy to an ecosystem wallet. For more variants on the various auth strategies, refer to [inAppWallet](/typescript/v5/inAppWallet).\n *\n * ```ts\n * import { ecosystemWallet } from \"thirdweb/wallets\";\n *\n * const wallet = ecosystemWallet(\"ecosystem.hooli\");\n *\n * const account = await wallet.connect({\n *   client,\n *   chain,\n *   strategy: \"google\",\n * });\n * ```\n *\n * [View all connection options](https://portal.thirdweb.com/references/typescript/v5/EcosystemWalletConnectionOptions).\n *\n * ### Connect to a restricted ecosystem wallet with your designated partner ID\n *\n * The partner ID will be provided to you by the ecosystem with which you're integrating.\n *\n * ```ts\n * import { ecosystemWallet } from \"thirdweb/wallets\";\n * const wallet = ecosystemWallet(\"ecosystem.hooli\", {\n *  partnerId: \"...\"\n * });\n * ```\n *\n *\n * @wallet\n */\nexport function ecosystemWallet(\n  ...args: CreateWalletArgs<EcosystemWalletId>\n): EcosystemWallet {\n  const [ecosystemId, createOptions] = args;\n  const ecosystem = {\n    id: ecosystemId,\n    partnerId: createOptions?.partnerId,\n  };\n  return createInAppWallet({\n    connectorFactory: async (client: ThirdwebClient) => {\n      const { InAppWebConnector } = await import(\"./lib/web-connector.js\");\n      return new InAppWebConnector({\n        client,\n        ecosystem,\n        storage: createOptions?.storage,\n      });\n    },\n    createOptions: {\n      auth: {\n        ...createOptions?.auth,\n        options: [], // controlled by ecosystem\n      },\n      partnerId: ecosystem.partnerId,\n    },\n    ecosystem,\n  }) as EcosystemWallet;\n}\n","import type { ThirdwebClient } from \"../../../client/client.js\";\nimport { createInAppWallet } from \"../core/wallet/in-app-core.js\";\nimport type {\n  InAppWallet,\n  InAppWalletCreationOptions,\n} from \"../core/wallet/types.js\";\n\n/**\n * Creates an app scoped wallet for users based on various authentication methods. Full list of available authentication methods [here](https://portal.thirdweb.com/connect/wallet/sign-in-methods/configure).\n *\n * Can also be configured to use Account Abstraction to directly connect to a ERC4337 smart account based on those authentication methods.\n *\n * @param createOptions - configuration options\n * Refer to [InAppWalletCreationOptions](https://portal.thirdweb.com/references/typescript/v5/InAppWalletCreationOptions) to see the available options.\n * @returns The created in-app wallet.\n * @example\n *\n * ### Login with socials\n *\n * ```ts\n * import { inAppWallet } from \"thirdweb/wallets\";\n *\n * const wallet = inAppWallet();\n *\n * const account = await wallet.connect({\n *   client,\n *   chain,\n *   strategy: \"google\", // or \"apple\", \"facebook\",\"discord\", \"github\", \"twitch\", \"x\", \"telegram\", \"line\", \"coinbase\", etc\n * });\n * ```\n *\n * [View all available social auth methods](https://portal.thirdweb.com/connect/wallet/sign-in-methods/configure)\n *\n * ### Enable smart accounts and sponsor gas for your users:\n *\n * With the `executionMode` option, you can enable smart accounts and sponsor gas for your users.\n *\n * **Using EIP-7702** (recommended):\n *\n * On chains with EIP-7702 enabled, you can upgrade the inapp wallet to a smart account, keeping the same address and performance as the regular EOA.\n *\n * ```ts\n * import { inAppWallet } from \"thirdweb/wallets\";\n * import { sepolia } from \"thirdweb/chains\";\n *\n * const wallet = inAppWallet({\n *  executionMode: {\n *   mode: \"EIP7702\",\n *   sponsorGas: true,\n *  },\n * });\n *\n * // account will be a smart account with sponsored gas enabled\n * const account = await wallet.connect({\n *   client,\n *   strategy: \"google\",\n * });\n * ```\n *\n * **Using EIP-4337**:\n *\n * On chains without EIP-7702 enabled, you can still use smart accounts using EIP-4337, this will return a different address (the smart contract address) than the regular EOA.\n *\n * ```ts\n * import { inAppWallet } from \"thirdweb/wallets/in-app\";\n *\n * const wallet = inAppWallet({\n *  executionMode: {\n *   mode: \"EIP4337\",\n *   smartAccount: {\n *    chain: sepolia, // chain required for EIP-4337\n *    sponsorGas: true,\n *   }\n *  },\n * });\n * ```\n *\n * ### Login with email\n *\n * To login with email, you can use the `preAuthenticate` function to first send a verification code to the user's email, then login with the verification code.\n *\n * ```ts\n * import { inAppWallet, preAuthenticate } from \"thirdweb/wallets/in-app\";\n *\n * const wallet = inAppWallet();\n *\n * // sends a verification code to the provided email\n * await preAuthenticate({\n *   client,\n *   strategy: \"email\",\n *   email: \"example@example.com\",\n * });\n *\n * // login with the verification code\n * const account = await wallet.connect({\n *   client,\n *   chain,\n *   strategy: \"email\",\n *   email: \"example@example.com\",\n *   verificationCode: \"123456\",\n * });\n * ```\n *\n * ### Login with phone number\n *\n * Similar to email, you can login with a phone number by first sending a verification code to the user's phone number, then login with the verification code.\n *\n * ```ts\n * import { inAppWallet, preAuthenticate } from \"thirdweb/wallets/in-app\";\n *\n * const wallet = inAppWallet();\n *\n * // sends a verification code to the provided phone number\n * await preAuthenticate({\n *   client,\n *   strategy: \"phone\",\n *   phoneNumber: \"+1234567890\",\n * });\n *\n * // login with the verification code\n * const account = await wallet.connect({\n *   client,\n *   chain,\n *   strategy: \"phone\",\n *   honeNumber: \"+1234567890\",\n *   verificationCode: \"123456\",\n * });\n * ```\n *\n * ### Login with another wallet (SIWE)\n *\n * You can also login to the in-app wallet with another existing wallet by signing a standard Sign in with Ethereum (SIWE) message.\n *\n * ```ts\n * import { inAppWallet, createWallet } from \"thirdweb/wallets\";\n *\n * const rabby = createWallet(\"io.rabby\");\n * const inAppWallet = inAppWallet();\n *\n * const account = await inAppWallet.connect({\n *    strategy: \"wallet\",\n *    chain: mainnet,\n *    wallet: rabby,\n *    client: MY_CLIENT\n * });\n * ```\n *\n * ### Login with passkey\n *\n * You can also login with a passkey. This mode requires specifying whether it should create a new passkey, or sign in with an existing passkey. We recommend checking if the user has a passkey stored in their browser to automatically login with it.\n *\n * ```ts\n * import { inAppWallet, hasStoredPasskey } from \"thirdweb/wallets/in-app\";\n *\n * const wallet = inAppWallet();\n *\n * const wallet = inAppWallet();\n * const hasPasskey = await hasStoredPasskey(client);\n * await wallet.connect({\n *   client,\n *   strategy: \"passkey\",\n *  type: hasPasskey ? \"sign-in\" : \"sign-up\",\n * });\n * ```\n *\n * ### Connect to a guest account\n *\n * You can also connect to a guest account, this will create a new account for the user instantly and store it in the browser's local storage.\n *\n * You can later \"upgrade\" this account by linking another auth method, like email or phone for example. This will preserve the account's address and history.\n *\n * ```ts\n * import { inAppWallet } from \"thirdweb/wallets\";\n *\n * const wallet = inAppWallet();\n *\n * const account = await wallet.connect({\n *   client,\n *   strategy: \"guest\",\n * });\n * ```\n *\n * ### Connect to a backend account\n *\n * For usage in backends, you can create wallets with the `backend` strategy and a stable walletSecret.\n *\n * Make sure to keep that walletSecret safe as it is the key to access that wallet, never expose it to the client.\n *\n * ```ts\n * import { inAppWallet } from \"thirdweb/wallets\";\n *\n * const wallet = inAppWallet();\n *\n * const account = await wallet.connect({\n *   client,\n *   strategy: \"backend\",\n *   walletSecret: \"...\", // Your own secret, keep it safe\n * });\n * ```\n *\n * ### Connect with custom JWT (any OIDC provider)\n *\n * You can use any OIDC provider to authenticate your users. Make sure to configure it in your dashboard under in-app wallet settings.\n *\n * ```ts\n * import { inAppWallet } from \"thirdweb/wallets\";\n *\n * const wallet = inAppWallet();\n *\n * const account = await wallet.connect({\n *   client,\n *   strategy: \"jwt\",\n *   jwt: \"your_jwt_here\",\n * });\n * ```\n *\n * ### Connect with custom endpoint\n *\n * You can also use your own endpoint to authenticate your users. Make sure to configure it in your dashboard under in-app wallet settings.\n *\n * ```ts\n * import { inAppWallet } from \"thirdweb/wallets\";\n *\n * const wallet = inAppWallet();\n *\n * const account = await wallet.connect({\n *   client,\n *   strategy: \"auth_endpoint\",\n *   payload: \"your_auth_payload_here\",\n * });\n * ```\n *\n * ### Specify a logo, icon and name for your login page (Connect UI)\n *\n * You can specify a logo, icon and name for your login page to customize how in-app wallets are displayed in the Connect UI components (ConnectButton and ConnectEmbed).\n *\n * ```ts\n * import { inAppWallet } from \"thirdweb/wallets\";\n * const wallet = inAppWallet({\n *  metadata: {\n *    name: \"My App\",\n *    icon: \"https://example.com/icon.png\",\n *    image: {\n *      src: \"https://example.com/logo.png\",\n *      alt: \"My logo\",\n *      width: 100,\n *      height: 100,\n *   },\n *  },\n * });\n * ```\n *\n * ### Hide the ability to export the private key within the Connect Modal UI\n *\n * By default, the Connect Modal will show a button to export the private key of the wallet. You can hide this button by setting the `hidePrivateKeyExport` option to `true`.\n *\n * ```ts\n * import { inAppWallet } from \"thirdweb/wallets\";\n * const wallet = inAppWallet({\n *  hidePrivateKeyExport: true\n * });\n * ```\n *\n * ### Open the Oauth window in the same tab\n *\n * By default, the Oauth window will open in a popup window. You can change this behavior by setting the `auth.mode` option to `\"redirect\"`.\n *\n * ```ts\n * import { inAppWallet } from \"thirdweb/wallets\";\n * const wallet = inAppWallet({\n *  auth: {\n *    mode: \"redirect\"\n *  }\n * });\n * ```\n *\n * ### Override storage for the wallet state\n *\n * By default, wallet state is stored in the browser's local storage if in the browser, or in-memory storage if not in the browser. You can override this behavior by providing a custom storage object, useful for server side and CLI integrations.\n *\n * ```ts\n * import { inAppWallet } from \"thirdweb/wallets\";\n * import { AsyncStorage } from \"thirdweb/storage\";\n *\n * const myStorage: AsyncStorage = {\n *  getItem: async (key) => {\n *    return customGet(`CUSTOM_STORAGE_KEY${key}`);\n *  },\n *  setItem: async (key, value) => {\n *    return customSet(`CUSTOM_STORAGE_KEY${key}`, value);\n *  },\n *  removeItem: async (key) => {\n *    return customRemove(`CUSTOM_STORAGE_KEY${key}`);\n *  },\n * };\n *\n * const wallet = inAppWallet({\n *  storage: myStorage,\n * });\n * ```\n *\n * ### Get the auth token for the wallet\n *\n * You can get the auth token for the wallet by calling `wallet.getAuthToken()`.\n *\n * ```ts\n * import { inAppWallet } from \"thirdweb/wallets\";\n *\n * const wallet = inAppWallet();\n *\n * await wallet.connect({\n *   client,\n *   strategy: \"google\",\n * });\n *\n * const authToken = await wallet.getAuthToken(); // this will return a JWT token that can be used to authenticate the user in the backend\n * console.log(authToken);\n * ```\n *\n * @returns The created in-app wallet.\n * @wallet\n */\nexport function inAppWallet(\n  createOptions?: InAppWalletCreationOptions,\n): InAppWallet {\n  return createInAppWallet({\n    connectorFactory: async (client: ThirdwebClient) => {\n      const { InAppWebConnector } = await import(\"./lib/web-connector.js\");\n      return new InAppWebConnector({\n        client,\n        passkeyDomain: createOptions?.auth?.passkeyDomain,\n        storage: createOptions?.storage,\n      });\n    },\n    createOptions,\n  }) as InAppWallet;\n}\n","import * as ox__Authorization from \"ox/Authorization\";\nimport * as ox__Signature from \"ox/Signature\";\nimport {\n  type EIP1193Provider,\n  getTypesForEIP712Domain,\n  type SignTypedDataParameters,\n  serializeTypedData,\n  stringify,\n  validateTypedData,\n  withTimeout,\n} from \"viem\";\nimport { isInsufficientFundsError } from \"../../analytics/track/helpers.js\";\nimport {\n  trackInsufficientFundsError,\n  trackTransaction,\n} from \"../../analytics/track/transaction.js\";\nimport type { Chain } from \"../../chains/types.js\";\nimport { getCachedChain, getChainMetadata } from \"../../chains/utils.js\";\nimport type { ThirdwebClient } from \"../../client/client.js\";\nimport type { AuthorizationRequest } from \"../../transaction/actions/eip7702/authorization.js\";\nimport { getAddress } from \"../../utils/address.js\";\nimport {\n  type Hex,\n  numberToHex,\n  stringToHex,\n  uint8ArrayToHex,\n} from \"../../utils/encoding/hex.js\";\nimport { parseTypedData } from \"../../utils/signatures/helpers/parse-typed-data.js\";\nimport type { InjectedSupportedWalletIds } from \"../__generated__/wallet-ids.js\";\nimport { toGetCallsStatusResponse } from \"../eip5792/get-calls-status.js\";\nimport { toGetCapabilitiesResult } from \"../eip5792/get-capabilities.js\";\nimport { toProviderCallParams } from \"../eip5792/send-calls.js\";\nimport type { GetCallsStatusRawResponse } from \"../eip5792/types.js\";\nimport type { Account, SendTransactionOption } from \"../interfaces/wallet.js\";\nimport type { DisconnectFn, SwitchChainFn } from \"../types.js\";\nimport { getValidPublicRPCUrl } from \"../utils/chains.js\";\nimport { normalizeChainId } from \"../utils/normalizeChainId.js\";\nimport type { WalletEmitter } from \"../wallet-emitter.js\";\nimport type { WalletId } from \"../wallet-types.js\";\nimport { injectedProvider } from \"./mipdStore.js\";\n\n// TODO: save the provider in data\nexport function getInjectedProvider(walletId: WalletId) {\n  const provider = injectedProvider(walletId);\n  if (!provider) {\n    throw new Error(`No injected provider found for wallet: \"${walletId}\"`);\n  }\n\n  return provider;\n}\n\n/**\n * @internal\n */\nexport async function connectEip1193Wallet({\n  id,\n  provider,\n  emitter,\n  client,\n  chain,\n}: {\n  id: InjectedSupportedWalletIds | ({} & string);\n  provider: EIP1193Provider;\n  client: ThirdwebClient;\n  chain?: Chain;\n  emitter: WalletEmitter<InjectedSupportedWalletIds>;\n}): Promise<ReturnType<typeof onConnect>> {\n  let addresses: string[] | undefined;\n  const retries = 3;\n  let attempts = 0;\n  // retry 3 times, some providers take a while to return accounts on connect\n  while (!addresses?.[0] && attempts < retries) {\n    try {\n      addresses = await provider.request({\n        method: \"eth_requestAccounts\",\n      });\n    } catch (e) {\n      console.error(e);\n      if (extractErrorMessage(e)?.toLowerCase()?.includes(\"rejected\")) {\n        throw e;\n      }\n      await new Promise((resolve) => setTimeout(resolve, 500));\n    }\n    attempts++;\n  }\n\n  const addr = addresses?.[0];\n  if (!addr) {\n    throw new Error(\"Failed to connect to wallet, no accounts available\");\n  }\n\n  // use the first account\n  const address = getAddress(addr);\n\n  // get the chainId the provider is on\n  const chainId = await provider\n    .request({ method: \"eth_chainId\" })\n    .then(normalizeChainId)\n    .catch((e) => {\n      throw new Error(\"Error reading chainId from provider\", e);\n    });\n\n  let connectedChain =\n    chain && chain.id === chainId ? chain : getCachedChain(chainId);\n\n  try {\n    // if we want a specific chainId and it is not the same as the provider chainId, trigger switchChain\n    // we check for undefined chain ID since some chain-specific wallets like Abstract will not send a chain ID on connection\n    if (chain && typeof chain.id !== \"undefined\" && chain.id !== chainId) {\n      await switchChain(provider, chain);\n      connectedChain = chain;\n    }\n  } catch {\n    console.warn(\n      `Error switching to chain ${chain?.id} - defaulting to wallet chain (${chainId})`,\n    );\n  }\n\n  return onConnect({\n    address,\n    chain: connectedChain,\n    client,\n    emitter,\n    id,\n    provider,\n  });\n}\n\n/**\n * @internal\n */\nexport async function autoConnectEip1193Wallet({\n  id,\n  provider,\n  emitter,\n  client,\n  chain,\n}: {\n  id: InjectedSupportedWalletIds | ({} & string);\n  provider: EIP1193Provider;\n  emitter: WalletEmitter<InjectedSupportedWalletIds>;\n  client: ThirdwebClient;\n  chain?: Chain;\n}): Promise<ReturnType<typeof onConnect>> {\n  // connected accounts\n  const addresses = await provider.request({\n    method: \"eth_accounts\",\n  });\n\n  const addr = addresses[0];\n  if (!addr) {\n    throw new Error(\"Failed to connect to wallet, no accounts available\");\n  }\n\n  // use the first account\n  const address = getAddress(addr);\n\n  // get the chainId the provider is on\n  const chainId = await provider\n    .request({ method: \"eth_chainId\" })\n    .then(normalizeChainId);\n\n  const connectedChain =\n    chain && chain.id === chainId ? chain : getCachedChain(chainId);\n\n  return onConnect({\n    address,\n    chain: connectedChain,\n    client,\n    emitter,\n    id,\n    provider,\n  });\n}\n\nfunction createAccount({\n  provider,\n  address,\n  client,\n  id,\n}: {\n  provider: EIP1193Provider;\n  address: string;\n  client: ThirdwebClient;\n  id: WalletId | ({} & string);\n}) {\n  const account: Account = {\n    address: getAddress(address),\n    async sendTransaction(tx: SendTransactionOption) {\n      const gasFees = tx.gasPrice\n        ? {\n            gasPrice: numberToHex(tx.gasPrice),\n          }\n        : {\n            maxFeePerGas: tx.maxFeePerGas\n              ? numberToHex(tx.maxFeePerGas)\n              : undefined,\n            maxPriorityFeePerGas: tx.maxPriorityFeePerGas\n              ? numberToHex(tx.maxPriorityFeePerGas)\n              : undefined,\n          };\n      const params = [\n        {\n          ...gasFees,\n          from: this.address,\n          gas: tx.gas ? numberToHex(tx.gas) : undefined,\n          nonce: tx.nonce ? numberToHex(tx.nonce) : undefined,\n          to: tx.to ? getAddress(tx.to) : undefined,\n          data: tx.data,\n          value: tx.value ? numberToHex(tx.value) : undefined,\n          authorizationList: tx.authorizationList\n            ? ox__Authorization.toRpcList(tx.authorizationList)\n            : undefined,\n          accessList: tx.accessList,\n          ...tx.eip712,\n        },\n      ];\n\n      try {\n        const transactionHash = (await provider.request({\n          method: \"eth_sendTransaction\",\n          // @ts-expect-error - overriding types here\n          params,\n        })) as Hex;\n\n        trackTransaction({\n          chainId: tx.chainId,\n          client,\n          contractAddress: tx.to ?? undefined,\n          gasPrice: tx.gasPrice,\n          transactionHash,\n          walletAddress: getAddress(address),\n          walletType: id,\n        });\n\n        return {\n          transactionHash,\n        };\n      } catch (error) {\n        // Track insufficient funds errors\n        if (isInsufficientFundsError(error)) {\n          trackInsufficientFundsError({\n            chainId: tx.chainId,\n            client,\n            contractAddress: tx.to || undefined,\n            error,\n            transactionValue: tx.value,\n            walletAddress: getAddress(address),\n          });\n        }\n\n        throw error;\n      }\n    },\n    async signMessage({ message }) {\n      if (!account.address) {\n        throw new Error(\"Provider not setup\");\n      }\n\n      const messageToSign = (() => {\n        if (typeof message === \"string\") {\n          return stringToHex(message);\n        }\n        if (message.raw instanceof Uint8Array) {\n          return uint8ArrayToHex(message.raw);\n        }\n        return message.raw;\n      })();\n\n      return await provider.request({\n        method: \"personal_sign\",\n        params: [messageToSign, getAddress(account.address)],\n      });\n    },\n    async signAuthorization(authorization: AuthorizationRequest) {\n      const payload = ox__Authorization.getSignPayload(authorization);\n      let signature: Hex | undefined;\n      try {\n        signature = await provider.request({\n          method: \"eth_sign\",\n          params: [getAddress(account.address), payload],\n        });\n      } catch {\n        // fallback to secp256k1_sign, some providers don't support eth_sign\n        signature = await provider.request({\n          // @ts-expect-error - overriding types here\n          method: \"secp256k1_sign\",\n          params: [payload],\n        });\n      }\n      if (!signature) {\n        throw new Error(\"Failed to sign authorization\");\n      }\n      const parsedSignature = ox__Signature.fromHex(signature as Hex);\n      return { ...authorization, ...parsedSignature };\n    },\n    async signTypedData(typedData) {\n      if (!provider || !account.address) {\n        throw new Error(\"Provider not setup\");\n      }\n      const parsedTypedData = parseTypedData(typedData);\n\n      const { domain, message, primaryType } =\n        parsedTypedData as unknown as SignTypedDataParameters;\n\n      const types = {\n        EIP712Domain: getTypesForEIP712Domain({ domain }),\n        ...parsedTypedData.types,\n      };\n\n      // Need to do a runtime validation check on addresses, byte ranges, integer ranges, etc\n      // as we can't statically check this with TypeScript.\n      validateTypedData({ domain, message, primaryType, types });\n\n      const stringifiedData = serializeTypedData({\n        domain: domain ?? {},\n        message,\n        primaryType,\n        types,\n      });\n\n      return await provider.request({\n        method: \"eth_signTypedData_v4\",\n        params: [getAddress(account.address), stringifiedData],\n      });\n    },\n    async watchAsset(asset) {\n      const result = await provider.request(\n        {\n          method: \"wallet_watchAsset\",\n          params: asset,\n        },\n        { retryCount: 0 },\n      );\n      return result;\n    },\n    async sendCalls(options) {\n      try {\n        const { callParams, chain } = await toProviderCallParams(\n          options,\n          account,\n        );\n        const callId = await provider.request({\n          method: \"wallet_sendCalls\",\n          params: callParams,\n        });\n        if (callId && typeof callId === \"object\" && \"id\" in callId) {\n          return { chain, client, id: callId.id };\n        }\n        return { chain, client, id: callId };\n      } catch (error) {\n        if (/unsupport|not support/i.test((error as Error).message)) {\n          throw new Error(\n            `${id} errored calling wallet_sendCalls, with error: ${error instanceof Error ? error.message : stringify(error)}`,\n          );\n        }\n        throw error;\n      }\n    },\n    async getCallsStatus(options) {\n      try {\n        const rawResponse = (await provider.request({\n          method: \"wallet_getCallsStatus\",\n          params: [options.id],\n        })) as GetCallsStatusRawResponse;\n        return toGetCallsStatusResponse(rawResponse);\n      } catch (error) {\n        if (/unsupport|not support/i.test((error as Error).message)) {\n          throw new Error(\n            `${id} does not support wallet_getCallsStatus, reach out to them directly to request EIP-5792 support.`,\n          );\n        }\n        throw error;\n      }\n    },\n    async getCapabilities(options) {\n      const chainIdFilter = options.chainId;\n      try {\n        const result = await provider.request({\n          method: \"wallet_getCapabilities\",\n          params: [\n            getAddress(account.address),\n            chainIdFilter ? [numberToHex(chainIdFilter)] : undefined,\n          ],\n        });\n        return toGetCapabilitiesResult(result, chainIdFilter);\n      } catch (error: unknown) {\n        if (\n          /unsupport|not support|not available/i.test((error as Error).message)\n        ) {\n          return {\n            message: `${id} does not support wallet_getCapabilities, reach out to them directly to request EIP-5792 support.`,\n          };\n        }\n        throw error;\n      }\n    },\n  };\n\n  return account;\n}\n\n/**\n * Call this method when the wallet provider is connected or auto connected\n * @internal\n */\nasync function onConnect({\n  provider,\n  address,\n  chain,\n  emitter,\n  client,\n  id,\n}: {\n  provider: EIP1193Provider;\n  address: string;\n  chain: Chain;\n  emitter: WalletEmitter<InjectedSupportedWalletIds>;\n  client: ThirdwebClient;\n  id: WalletId | ({} & string);\n}): Promise<[Account, Chain, DisconnectFn, SwitchChainFn]> {\n  const account = createAccount({ address, client, id, provider });\n  async function disconnect() {\n    provider.removeListener(\"accountsChanged\", onAccountsChanged);\n    provider.removeListener(\"chainChanged\", onChainChanged);\n    provider.removeListener(\"disconnect\", onDisconnect);\n\n    // Experimental support for MetaMask disconnect\n    // https://github.com/MetaMask/metamask-improvement-proposals/blob/main/MIPs/mip-2.md\n    try {\n      // Adding timeout as not all wallets support this method and can hang\n      await withTimeout(\n        () =>\n          provider.request({\n            method: \"wallet_revokePermissions\",\n            params: [{ eth_accounts: {} }],\n          }),\n        { timeout: 100 },\n      );\n    } catch {}\n  }\n\n  async function onDisconnect() {\n    disconnect();\n    emitter.emit(\"disconnect\", undefined);\n  }\n\n  function onAccountsChanged(accounts: string[]) {\n    if (accounts[0]) {\n      const newAccount = createAccount({\n        address: getAddress(accounts[0]),\n        client,\n        id,\n        provider,\n      });\n\n      emitter.emit(\"accountChanged\", newAccount);\n      emitter.emit(\"accountsChanged\", accounts);\n    } else {\n      onDisconnect();\n    }\n  }\n\n  function onChainChanged(newChainId: string) {\n    const newChain = getCachedChain(normalizeChainId(newChainId));\n    emitter.emit(\"chainChanged\", newChain);\n  }\n\n  if (provider.on) {\n    provider.on(\"accountsChanged\", onAccountsChanged);\n    provider.on(\"chainChanged\", onChainChanged);\n    provider.on(\"disconnect\", onDisconnect);\n  }\n\n  return [\n    account,\n    chain,\n    onDisconnect,\n    (newChain) => switchChain(provider, newChain),\n  ] as const;\n}\n\n/**\n * @internal\n */\nasync function switchChain(provider: EIP1193Provider, chain: Chain) {\n  const hexChainId = numberToHex(chain.id);\n  try {\n    await provider.request({\n      method: \"wallet_switchEthereumChain\",\n      params: [{ chainId: hexChainId }],\n    });\n  } catch {\n    // if chain does not exist, add the chain\n    const apiChain = await getChainMetadata(chain);\n    await provider.request({\n      method: \"wallet_addEthereumChain\",\n      params: [\n        {\n          blockExplorerUrls: apiChain.explorers?.map((x) => x.url),\n          chainId: hexChainId,\n          chainName: apiChain.name,\n          nativeCurrency: apiChain.nativeCurrency, // no client id on purpose here\n          rpcUrls: getValidPublicRPCUrl(apiChain),\n        },\n      ],\n    });\n  }\n}\n\nfunction extractErrorMessage(e: unknown) {\n  if (e instanceof Error) {\n    return e.message;\n  }\n  if (typeof e === \"string\") {\n    return e;\n  }\n  if (typeof e === \"object\" && e !== null) {\n    return JSON.stringify(e);\n  }\n  return String(e);\n}\n","import { trackConnect } from \"../analytics/track/connect.js\";\nimport type { Chain } from \"../chains/types.js\";\nimport { getCachedChainIfExists } from \"../chains/utils.js\";\nimport { webLocalStorage } from \"../utils/storage/webStorage.js\";\nimport { formatWalletConnectUrl } from \"../utils/url.js\";\nimport { isMobile } from \"../utils/web/isMobile.js\";\nimport { openWindow } from \"../utils/web/openWindow.js\";\nimport { getWalletInfo } from \"./__generated__/getWalletInfo.js\";\nimport type {\n  InjectedSupportedWalletIds,\n  WCSupportedWalletIds,\n} from \"./__generated__/wallet-ids.js\";\nimport { coinbaseWalletSDK } from \"./coinbase/coinbase-wallet.js\";\nimport { getCoinbaseWebProvider } from \"./coinbase/coinbase-web.js\";\nimport { COINBASE } from \"./constants.js\";\nimport { isEcosystemWallet } from \"./ecosystem/is-ecosystem-wallet.js\";\nimport { ecosystemWallet } from \"./in-app/web/ecosystem.js\";\nimport { inAppWallet } from \"./in-app/web/in-app.js\";\nimport { getInjectedProvider } from \"./injected/index.js\";\nimport type { Account, Wallet } from \"./interfaces/wallet.js\";\nimport { smartWallet } from \"./smart/smart-wallet.js\";\nimport type { QROverlay } from \"./wallet-connect/qr-overlay.js\";\nimport type { WCConnectOptions } from \"./wallet-connect/types.js\";\nimport { createWalletEmitter } from \"./wallet-emitter.js\";\nimport type {\n  CreateWalletArgs,\n  EcosystemWalletId,\n  WalletAutoConnectionOption,\n  WalletId,\n} from \"./wallet-types.js\";\n\n// TODO: figure out how to define the type without tuple args type and using function overloads\n\n/**\n * Creates a wallet based on the provided ID and arguments.\n *\n * - Supports 500+ wallets\n * - Handles both injected browser wallets and WalletConnect sessions\n *\n * [View all available wallets](https://portal.thirdweb.com/typescript/v5/supported-wallets)\n *\n * @param args - The arguments for creating the wallet.\n * @param args.id - The ID of the wallet to create, this will be autocompleted by your IDE.\n * [View all available wallets](https://portal.thirdweb.com/typescript/v5/supported-wallets)\n * @param args.createOptions - The options for creating the wallet.\n * The arguments are different for each wallet type.\n * Refer to the [WalletCreationOptions](https://portal.thirdweb.com/references/typescript/v5/WalletCreationOptions) type for more details.\n * @returns - The created wallet.\n * @example\n *\n * ## Connecting the wallet\n *\n * Once created, you can connect the wallet to your app by calling the `connect` method.\n *\n * The `connect` method returns a promise that resolves to the connected account.\n *\n * Each wallet type can have different connect options. [View the different connect options](https://portal.thirdweb.com/references/typescript/v5/WalletConnectionOption)\n *\n * ## Connecting to an injected wallet\n *\n * ```ts\n * import { createWallet } from \"thirdweb/wallets\";\n *\n * const metamaskWallet = createWallet(\"io.metamask\");\n *\n * const account = await metamaskWallet.connect({\n *  client,\n * });\n * ```\n *\n * You can check if a wallet is installed by calling the [injectedProvider](https://portal.thirdweb.com/references/typescript/v5/injectedProvider) method.\n *\n * ## Connecting via WalletConnect modal\n *\n * ```ts\n * import { createWallet } from \"thirdweb/wallets\";\n *\n * const metamaskWallet = createWallet(\"io.metamask\");\n *\n * await metamask.connect({\n *   client,\n *   walletConnect: {\n *     projectId: \"YOUR_PROJECT_ID\",\n *     showQrModal: true,\n *     appMetadata: {\n *       name: \"My App\",\n *       url: \"https://my-app.com\",\n *       description: \"my app description\",\n *       logoUrl: \"https://path/to/my-app/logo.svg\",\n *     },\n *   },\n * });\n * ```\n * [View ConnectWallet connection options](https://portal.thirdweb.com/references/typescript/v5/WCConnectOptions)\n *\n * ## Connecting with coinbase wallet\n *\n * ```ts\n * import { createWallet } from \"thirdweb/wallets\";\n *\n * const cbWallet = createWallet(\"com.coinbase.wallet\", {\n *   appMetadata: {\n *     name: \"My App\",\n *     url: \"https://my-app.com\",\n *     description: \"my app description\",\n *     logoUrl: \"https://path/to/my-app/logo.svg\",\n *   },\n *   walletConfig: {\n *     // options: 'all' | 'smartWalletOnly' | 'eoaOnly'\n *     options: 'all',\n *   },\n * });\n *\n * const account = await cbWallet.connect({\n *  client,\n * });\n * ```\n *\n * [View Coinbase wallet creation options](https://portal.thirdweb.com/references/typescript/v5/CoinbaseWalletCreationOptions)\n *\n * ## Connecting with a smart wallet\n *\n * ```ts\n * import { createWallet } from \"thirdweb/wallets\";\n *\n * const wallet = createWallet(\"smart\", {\n *   chain: sepolia,\n *   sponsorGas: true,\n * });\n *\n * const account = await wallet.connect({\n *  client,\n *  personalAccount, // pass the admin account\n * });\n * ```\n *\n * @wallet\n */\nexport function createWallet<const ID extends WalletId>(\n  ...args: CreateWalletArgs<ID>\n): Wallet<ID> {\n  const [id, creationOptions] = args;\n\n  switch (true) {\n    /**\n     * SMART WALLET\n     */\n    case id === \"smart\": {\n      return smartWallet(\n        creationOptions as CreateWalletArgs<\"smart\">[1],\n      ) as Wallet<ID>;\n    }\n    /**\n     * IN-APP WALLET\n     */\n    case id === \"embedded\" || id === \"inApp\": {\n      return inAppWallet(\n        creationOptions as CreateWalletArgs<\"inApp\">[1],\n      ) as Wallet<ID>;\n    }\n    /**\n     * ECOSYSTEM WALLET\n     */\n    case isEcosystemWallet(id):\n      return ecosystemWallet(\n        ...(args as CreateWalletArgs<EcosystemWalletId>),\n      ) as Wallet<ID>;\n\n    /**\n     * COINBASE WALLET VIA SDK\n     * -> if no injected coinbase found, we'll use the coinbase SDK\n     */\n    case id === COINBASE: {\n      const options = creationOptions as CreateWalletArgs<typeof COINBASE>[1];\n      return coinbaseWalletSDK({\n        createOptions: options,\n        onConnectRequested: async (provider) => {\n          // on the web, make sure to show the coinbase popup IMMEDIATELY on connection requested\n          // otherwise the popup might get blocked in safari\n          // TODO awaiting the provider is fast only thanks to preloading that happens in our components\n          // these probably need to actually imported / created synchronously to be used headless properly\n          const { showCoinbasePopup } = await import(\"./coinbase/utils.js\");\n          return showCoinbasePopup(provider);\n        },\n        providerFactory: () => getCoinbaseWebProvider(options),\n      }) as Wallet<ID>;\n    }\n    /**\n     * WALLET CONNECT AND INJECTED WALLETS + walletConnect standalone\n     */\n    default: {\n      const emitter = createWalletEmitter<ID>();\n      let account: Account | undefined;\n      let chain: Chain | undefined;\n      let unsubscribeChain: (() => void) | undefined;\n\n      function reset() {\n        account = undefined;\n        chain = undefined;\n      }\n\n      let handleDisconnect = async () => {};\n\n      const unsubscribeDisconnect = emitter.subscribe(\"disconnect\", () => {\n        reset();\n        unsubscribeChain?.();\n        unsubscribeDisconnect();\n      });\n\n      emitter.subscribe(\"accountChanged\", (_account) => {\n        account = _account;\n      });\n\n      let handleSwitchChain: (chain: Chain) => Promise<void> = async () => {\n        throw new Error(\"Not implemented yet\");\n      };\n\n      // on mobile, deeplink to the wallet app for session handling\n      const sessionHandler = isMobile()\n        ? (uri: string) => openWindow(uri)\n        : undefined;\n\n      const wallet: Wallet<ID> = {\n        autoConnect: async (\n          options: WalletAutoConnectionOption<\n            WCSupportedWalletIds | InjectedSupportedWalletIds\n          >,\n        ) => {\n          const { injectedProvider } = await import(\"./injected/mipdStore.js\");\n          // injected wallet priority for autoConnect\n          if (id !== \"walletConnect\" && injectedProvider(id)) {\n            const { autoConnectEip1193Wallet } = await import(\n              \"./injected/index.js\"\n            );\n\n            const [\n              connectedAccount,\n              connectedChain,\n              doDisconnect,\n              doSwitchChain,\n            ] = await autoConnectEip1193Wallet({\n              chain: options.chain,\n              client: options.client,\n              emitter,\n              id: id as InjectedSupportedWalletIds,\n              provider: getInjectedProvider(id),\n            });\n            // set the states\n            account = connectedAccount;\n            chain = connectedChain;\n            handleDisconnect = doDisconnect;\n            handleSwitchChain = doSwitchChain;\n            unsubscribeChain = emitter.subscribe(\"chainChanged\", (newChain) => {\n              chain = newChain;\n            });\n            trackConnect({\n              chainId: chain.id,\n              client: options.client,\n              walletAddress: account.address,\n              walletType: id,\n            });\n            // return account\n            return account;\n          }\n\n          if (options && \"client\" in options) {\n            const { autoConnectWC } = await import(\n              \"./wallet-connect/controller.js\"\n            );\n\n            const [\n              connectedAccount,\n              connectedChain,\n              doDisconnect,\n              doSwitchChain,\n            ] = await autoConnectWC(\n              options,\n              emitter,\n              wallet.id as WCSupportedWalletIds,\n              webLocalStorage,\n              sessionHandler,\n            );\n            // set the states\n            account = connectedAccount;\n            chain = connectedChain;\n            handleDisconnect = doDisconnect;\n            handleSwitchChain = doSwitchChain;\n            trackConnect({\n              chainId: chain.id,\n              client: options.client,\n              walletAddress: account.address,\n              walletType: id,\n            });\n            // return account\n            return account;\n          }\n          throw new Error(\"Failed to auto connect\");\n        },\n        connect: async (options) => {\n          async function wcConnect(wcOptions: WCConnectOptions) {\n            const { connectWC } = await import(\n              \"./wallet-connect/controller.js\"\n            );\n\n            let qrOverlay: QROverlay | undefined;\n\n            try {\n              const [\n                connectedAccount,\n                connectedChain,\n                doDisconnect,\n                doSwitchChain,\n              ] = await connectWC(\n                {\n                  ...wcOptions,\n                  walletConnect: {\n                    ...wcOptions.walletConnect,\n                    onDisplayUri:\n                      wcOptions.walletConnect?.onDisplayUri ||\n                      (async (uri) => {\n                        // Check if we're in a browser environment\n                        if (\n                          typeof window !== \"undefined\" &&\n                          typeof document !== \"undefined\"\n                        ) {\n                          // on mobile, open the wallet app via deeplink\n                          if (isMobile()) {\n                            const walletInfo = await getWalletInfo(id);\n\n                            const mobileAppLink =\n                              walletInfo.mobile.native ||\n                              walletInfo.mobile.universal;\n                            if (mobileAppLink) {\n                              openWindow(\n                                formatWalletConnectUrl(mobileAppLink, uri)\n                                  .redirect,\n                              );\n                            } else {\n                              // on android, wc:// links show the app picker\n                              openWindow(uri);\n                            }\n                            return;\n                          }\n                          // on desktop, create a QR overlay\n                          else {\n                            try {\n                              const { createQROverlay } = await import(\n                                \"./wallet-connect/qr-overlay.js\"\n                              );\n\n                              // Clean up any existing overlay\n                              if (qrOverlay) {\n                                qrOverlay.destroy();\n                              }\n\n                              // Create new QR overlay\n                              qrOverlay = createQROverlay(uri, {\n                                theme:\n                                  wcOptions.walletConnect?.qrModalOptions\n                                    ?.themeMode ?? \"dark\",\n                                qrSize: 280,\n                                showCloseButton: true,\n                                onCancel: () => {\n                                  wcOptions.walletConnect?.onCancel?.();\n                                },\n                              });\n                            } catch (error) {\n                              console.error(\n                                \"Failed to create QR overlay:\",\n                                error,\n                              );\n                            }\n                          }\n                        }\n                      }),\n                  },\n                },\n                emitter,\n                wallet.id as WCSupportedWalletIds | \"walletConnect\",\n                webLocalStorage,\n                sessionHandler,\n              );\n\n              // Clean up QR overlay on successful connection\n              if (qrOverlay) {\n                qrOverlay.destroy();\n                qrOverlay = undefined;\n              }\n\n              // set the states\n              account = connectedAccount;\n              chain = connectedChain;\n              handleDisconnect = doDisconnect;\n              handleSwitchChain = doSwitchChain;\n              trackConnect({\n                chainId: chain.id,\n                client: wcOptions.client,\n                walletAddress: account.address,\n                walletType: id,\n              });\n              return account;\n            } catch (error) {\n              // Clean up QR overlay on connection error\n              if (qrOverlay) {\n                qrOverlay.destroy();\n                qrOverlay = undefined;\n              }\n              throw error;\n            }\n          }\n\n          if (id === \"walletConnect\") {\n            const { client, chain: _chain, ...walletConnectOptions } = options;\n\n            return wcConnect({\n              chain: _chain,\n              client,\n              walletConnect: {\n                ...walletConnectOptions,\n              },\n            });\n          }\n\n          // prefer walletconnect over injected if explicitely passing walletConnect options\n          const forceWalletConnectOption =\n            options && \"walletConnect\" in options;\n\n          const { injectedProvider } = await import(\"./injected/mipdStore.js\");\n          if (injectedProvider(id) && !forceWalletConnectOption) {\n            const { connectEip1193Wallet } = await import(\n              \"./injected/index.js\"\n            );\n\n            const [\n              connectedAccount,\n              connectedChain,\n              doDisconnect,\n              doSwitchChain,\n            ] = await connectEip1193Wallet({\n              chain: options.chain,\n              client: options.client,\n              emitter,\n              id: id as InjectedSupportedWalletIds,\n              provider: getInjectedProvider(id),\n            });\n            // set the states\n            account = connectedAccount;\n            chain = connectedChain;\n            handleDisconnect = doDisconnect;\n            handleSwitchChain = doSwitchChain;\n            unsubscribeChain = emitter.subscribe(\"chainChanged\", (newChain) => {\n              chain = newChain;\n            });\n            trackConnect({\n              chainId: chain.id,\n              client: options.client,\n              walletAddress: account.address,\n              walletType: id,\n            });\n            // return account\n            return account;\n          }\n\n          if (options && \"client\" in options) {\n            return wcConnect(options);\n          }\n          throw new Error(\"Failed to connect\");\n        },\n        // these get overridden in connect and autoConnect\n        disconnect: async () => {\n          reset();\n          await handleDisconnect();\n        },\n        getAccount: () => account,\n        getChain() {\n          if (!chain) {\n            return undefined;\n          }\n\n          chain = getCachedChainIfExists(chain.id) || chain;\n          return chain;\n        },\n        getConfig: () => args[1],\n        id,\n        subscribe: emitter.subscribe,\n        switchChain: async (c) => {\n          // TODO: this should actually throw an error if the chain switch fails\n          // but our useSwitchActiveWalletChain hook currently doesn't handle this\n          try {\n            await handleSwitchChain(c);\n            chain = c;\n          } catch (e) {\n            console.error(\"Error switching chain\", e);\n          }\n        },\n      };\n      return wallet;\n    }\n  }\n}\n\n/**\n * Creates a wallet that allows connecting to any wallet that supports the WalletConnect protocol.\n * @returns The created smart wallet.\n * @example\n * ```ts\n * import { walletConnect } from \"thirdweb/wallets\";\n *\n * const wallet = walletConnect();\n *\n * const account = await wallet.connect({\n *  client\n * });\n * ```\n * @wallet\n */\nexport function walletConnect() {\n  return createWallet(\"walletConnect\");\n}\n","import { createStore, type EIP6963ProviderDetail, type Store } from \"mipd\";\nimport { isBrowser } from \"../../utils/platform.js\";\nimport type { InjectedSupportedWalletIds } from \"../__generated__/wallet-ids.js\";\nimport { METAMASK } from \"../constants.js\";\nimport { createWallet } from \"../create-wallet.js\";\nimport type { Ethereum } from \"../interfaces/ethereum.js\";\nimport type { Wallet } from \"../interfaces/wallet.js\";\nimport type { WalletId } from \"../wallet-types.js\";\n\ndeclare module \"mipd\" {\n  export interface Register {\n    rdns: WalletId;\n  }\n}\n\n// if we're in the browser -> create the store once immediately\nconst mipdStore: Store | undefined = /* @__PURE__ */ (() =>\n  isBrowser() ? createStore() : undefined)();\n\n/**\n * Get Injected Provider for given wallet by passing a wallet ID (rdns) using [EIP-6963](https://eips.ethereum.org/EIPS/eip-6963) Provider Discovery.\n * @param walletId - The Wallet Id (rdns) to check.\n * @example\n * ```ts\n * import { injectedProvider } from \"thirdweb/wallets\";\n *\n * const metamaskProvider = injectedProvider(\"io.metamask\");\n *\n * if (metamaskProvider) {\n *  console.log(\"Metamask is installed\");\n * }\n * ```\n * @returns The details of the Injected Provider if it exists. `undefined` otherwise.\n * @walletUtils\n */\nexport function injectedProvider(walletId: WalletId): Ethereum | undefined {\n  const injectedProviderDetail = getInstalledWalletProviders().find(\n    (p) => p.info.rdns === walletId,\n  );\n\n  return injectedProviderDetail?.provider as Ethereum | undefined;\n}\n\n/**\n * Get All currently installed wallets.\n * Uses EIP-6963 to discover installed browser extension wallets.\n * @returns a list of installed wallets\n */\nexport function getInstalledWallets(): Wallet[] {\n  const providers = getInstalledWalletProviders();\n  const walletIds = providers.map((provider) => provider.info.rdns);\n  return walletIds.map((w) => createWallet(w as InjectedSupportedWalletIds));\n}\n\n/**\n * Get Injected Provider Details for given wallet ID (rdns)\n * @internal\n */\nfunction getMIPDStore() {\n  if (!mipdStore) {\n    return undefined;\n  }\n  return mipdStore;\n}\n\nexport function getInstalledWalletProviders(): readonly EIP6963ProviderDetail[] {\n  const providers = getMIPDStore()?.getProviders() || [];\n\n  for (const provider of providers) {\n    // Map io.metamask.mobile to io.metamask rdns to fix double entry issue in MetaMask mobile browser\n    if ((provider.info.rdns as string) === \"io.metamask.mobile\") {\n      provider.info.rdns = METAMASK;\n      break;\n    }\n  }\n\n  return providers;\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,5,6]}